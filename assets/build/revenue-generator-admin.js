!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=3)}([function(e,t){var a;(a=jQuery).fn.showSnackbar=function(e,t){const r=a(this);r.text(e),r.addClass("rev-gen-snackbar--show"),setTimeout((function(){r.removeClass("rev-gen-snackbar--show")}),t)}},function(e,t,a){var r;!function(){"use strict";var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(e){return s(p(e),arguments)}function i(e,t){return o.apply(null,[e].concat(t||[]))}function s(e,t){var a,r,i,s,c,p,l,u,d,h=1,v=e.length,y="";for(r=0;r<v;r++)if("string"==typeof e[r])y+=e[r];else if("object"==typeof e[r]){if((s=e[r]).keys)for(a=t[h],i=0;i<s.keys.length;i++){if(null==a)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[i],s.keys[i-1]));a=a[s.keys[i]]}else a=s.param_no?t[s.param_no]:t[h++];if(n.not_type.test(s.type)&&n.not_primitive.test(s.type)&&a instanceof Function&&(a=a()),n.numeric_arg.test(s.type)&&"number"!=typeof a&&isNaN(a))throw new TypeError(o("[sprintf] expecting number but found %T",a));switch(n.number.test(s.type)&&(u=a>=0),s.type){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,s.width?parseInt(s.width):0);break;case"e":a=s.precision?parseFloat(a).toExponential(s.precision):parseFloat(a).toExponential();break;case"f":a=s.precision?parseFloat(a).toFixed(s.precision):parseFloat(a);break;case"g":a=s.precision?String(Number(a.toPrecision(s.precision))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=s.precision?a.substring(0,s.precision):a;break;case"t":a=String(!!a),a=s.precision?a.substring(0,s.precision):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=s.precision?a.substring(0,s.precision):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=s.precision?a.substring(0,s.precision):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase()}n.json.test(s.type)?y+=a:(!n.number.test(s.type)||u&&!s.sign?d="":(d=u?"+":"-",a=a.toString().replace(n.sign,"")),p=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",l=s.width-(d+a).length,c=s.width&&l>0?p.repeat(l):"",y+=s.align?d+a+c:"0"===p?d+c+a:c+d+a)}return y}var c=Object.create(null);function p(e){if(c[e])return c[e];for(var t,a=e,r=[],o=0;a;){if(null!==(t=n.text.exec(a)))r.push(t[0]);else if(null!==(t=n.modulo.exec(a)))r.push("%");else{if(null===(t=n.placeholder.exec(a)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var i=[],s=t[2],p=[];if(null===(p=n.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i.push(p[1]);""!==(s=s.substring(p[0].length));)if(null!==(p=n.key_access.exec(s)))i.push(p[1]);else{if(null===(p=n.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(p[1])}t[2]=i}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}a=a.substring(t[0].length)}return c[e]=r}t.sprintf=o,t.vsprintf=i,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=i,void 0===(r=function(){return{sprintf:o,vsprintf:i}}.call(t,a,t,e))||(e.exports=r))}()},function(e,t,a){e.exports=function(e,t){var a,r,n,o=0;function i(){var t,i,s=r,c=arguments.length;e:for(;s;){if(s.args.length===arguments.length){for(i=0;i<c;i++)if(s.args[i]!==arguments[i]){s=s.next;continue e}return s!==r&&(s===n&&(n=s.prev),s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.next=r,s.prev=null,r.prev=s,r=s),s.val}s=s.next}for(t=new Array(c),i=0;i<c;i++)t[i]=arguments[i];return s={args:t,val:e.apply(null,t)},r?(r.prev=s,s.next=r):n=s,o===a?(n=n.prev).next=null:o++,r=s,s.val}return t&&t.maxSize&&(a=t.maxSize),i.clear=function(){r=null,n=null,o=0},i}},function(e,t,a){a(7),e.exports=a(4)},function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var r;a(0);(r=jQuery)((function(){!function(){const e={body:r("body"),welcomeScreenWrapper:r(".welcome-screen-wrapper"),lowPostCard:r("#rg_js_lowPostCard"),highPostCard:r("#rg_js_highPostCard"),snackBar:r("#rg_js_SnackBar")},t=function(e="low"){const t={action:"rg_update_global_config",config_key:"average_post_publish_count",config_value:e,security:revenueGeneratorGlobalOptions.rg_global_config_nonce};a(revenueGeneratorGlobalOptions.ajaxUrl,t)},a=function(t,a){r.ajax({url:t,method:"POST",data:a,dataType:"json"}).done((function(t){e.snackBar.showSnackbar(t.msg,1500),e.welcomeScreenWrapper.fadeOut(1500,(function(){window.location.reload()}))}))};e.lowPostCard.on("click",(function(){t("low")})),e.highPostCard.on("click",(function(){t("high")}))}()}));var n,o,i,s,c=function(e,t){let a;return function(){const r=this,n=arguments;clearTimeout(a),a=setTimeout((function(){e.apply(r,n)}),t)}};function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}n={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},o=["(","?"],i={")":["("],":":["?","?:"]},s=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;var l={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,a){if(e)throw t;return a}};function u(e){var t=function(e){for(var t,a,r,c,p=[],l=[];t=e.match(s);){for(a=t[0],(r=e.substr(0,t.index).trim())&&p.push(r);c=l.pop();){if(i[a]){if(i[a][0]===c){a=i[a][1]||a;break}}else if(o.indexOf(c)>=0||n[c]<n[a]){l.push(c);break}p.push(c)}i[a]||l.push(a),e=e.substr(t.index+a.length)}return(e=e.trim())&&p.push(e),p.concat(l.reverse())}(e);return function(e){return function(e,t){var a,r,n,o,i,s,c=[];for(a=0;a<e.length;a++){if(i=e[a],o=l[i]){for(r=o.length,n=Array(r);r--;)n[r]=c.pop();try{s=o.apply(null,n)}catch(e){return e}}else s=t.hasOwnProperty(i)?t[i]:+i;c.push(s)}return c[0]}(t,e)}}var d={contextDelimiter:"",onMissingKey:null};function h(e,t){var a;for(a in this.data=e,this.pluralForms={},this.options={},d)this.options[a]=void 0!==t&&a in t?t[a]:d[a]}h.prototype.getPluralForm=function(e,t){var a,r,n,o,i=this.pluralForms[e];return i||("function"!=typeof(n=(a=this.data[e][""])["Plural-Forms"]||a["plural-forms"]||a.plural_forms)&&(r=function(e){var t,a,r;for(t=e.split(";"),a=0;a<t.length;a++)if(0===(r=t[a].trim()).indexOf("plural="))return r.substr(7)}(a["Plural-Forms"]||a["plural-forms"]||a.plural_forms),o=u(r),n=function(e){return+o({n:e})}),i=this.pluralForms[e]=n),i(t)},h.prototype.dcnpgettext=function(e,t,a,r,n){var o,i,s;return o=void 0===n?0:this.getPluralForm(e,n),i=a,t&&(i=t+this.options.contextDelimiter+a),(s=this.data[e][i])&&s[o]?s[o]:(this.options.onMissingKey&&this.options.onMissingKey(a,e),0===o?a:r)};var v=a(2),y=a.n(v),f=a(1),g=a.n(f);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w={"":{plural_forms:function(e){return 1===e?0:1}}},_=y()(console.error),O=new h({});function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";O.data[t]=b({},w,{},O.data[t],{},e),O.data[t][""]=b({},w[""],{},O.data[t][""])}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;return O.data[e]||x(void 0,e),O.dcnpgettext(e,t,a,r,n)}function P(e,t){return k(t,void 0,e)}function S(e){try{for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return g.a.sprintf.apply(g.a,[e].concat(a))}catch(t){return _("sprintf error: \n\n"+t.toString()),e}}!function(e){e((function(){!function(){const t={body:e("body"),requestSent:!1,isPublish:!1,previewWrapper:e(".rev-gen-preview-main"),layoutWrapper:e(".rev-gen-layout-wrapper"),laterpayLoader:e(".laterpay-loader-wrapper"),noResultsWrapper:".rev-gen-preview-main-no-result",searchContentWrapper:e(".rev-gen-preview-main--search"),searchContent:e("#rg_js_searchContent"),searchResultWrapper:e(".rev-gen-preview-main--search-results"),searchResultItem:".rev-gen-preview-main--search-results-item",postPreviewWrapper:e("#rg_js_postPreviewWrapper"),postTitle:".rev-gen-preview-main--post--title",postExcerpt:e("#rg_js_postPreviewExcerpt"),postContent:e("#rg_js_postPreviewContent"),purchaseOverlay:e("#rg_js_purchaseOverlay"),purchaseOverlayRemove:".rg-purchase-overlay-remove",purchaseOptionItems:".rg-purchase-overlay-purchase-options",purchaseOptionItem:".rg-purchase-overlay-purchase-options-item",purchaseOptionItemInfo:".rg-purchase-overlay-purchase-options-item-info",purchaseOptionItemTitle:".rg-purchase-overlay-purchase-options-item-info-title",purchaseOptionItemDesc:".rg-purchase-overlay-purchase-options-item-info-description",purchaseItemPriceIcon:".rg-purchase-overlay-purchase-options-item-price-icon",purchaseOptionItemPrice:".rg-purchase-overlay-purchase-options-item-price-span",purchaseOptionPriceSymbol:".rg-purchase-overlay-purchase-options-item-price-symbol",optionArea:".rg-purchase-overlay-option-area",addOptionArea:".rg-purchase-overlay-option-area-add-option",previewSecondItem:".rg-purchase-overlay-purchase-options .option-item-second",editOption:".rg-purchase-overlay-option-edit",optionRemove:".rg-purchase-overlay-option-remove",purchaseOptionType:"#rg_js_purchaseOptionType",optionManager:".rg-purchase-overlay-option-manager",individualPricingWrapper:".rg-purchase-overlay-option-manager-pricing",individualPricingSelection:".rg-purchase-overlay-option-pricing-selection",purchaseRevenueWrapper:".rg-purchase-overlay-option-manager-revenue",purchaseRevenueSelection:".rg-purchase-overlay-option-revenue-selection",durationWrapper:".rg-purchase-overlay-option-manager-duration",periodCountSelection:".rg-purchase-overlay-option-manager-duration-count",periodSelection:".rg-purchase-overlay-option-manager-duration-period",entitySelection:".rg-purchase-overlay-option-manager-entity",addPaywall:"#rj_js_addNewPaywall",gotoDashboard:"#rg_js_gotoDashboard",actionsWrapper:e(".rev-gen-preview-main--paywall-actions"),actionButtons:e(".rev-gen-preview-main--paywall-actions-update"),activatePaywall:e("#rg_js_activatePaywall"),savePaywall:e("#rg_js_savePaywall"),searchPaywallContent:e("#rg_js_searchPaywallContent"),searchPaywallWrapper:e(".rev-gen-preview-main--paywall-actions-search"),paywallName:e(".rev-gen-preview-main-paywall-name"),paywallTitle:".rg-purchase-overlay-title",paywallDesc:".rg-purchase-overlay-description",paywallAppliesTo:".rev-gen-preview-main-paywall-applies-to",currencyOverlay:".rev-gen-preview-main-currency-modal",currencyRadio:".rev-gen-preview-main-currency-modal-inputs-currency",currencyButton:".rev-gen-preview-main-currency-modal-button",currencyModalClose:".rev-gen-preview-main-currency-modal-cross",purchaseOptionWarningWrapper:".rev-gen-preview-main-option-update",purchaseOptionWarningMessage:".rev-gen-preview-main-option-update-message",purchaseOperationContinue:"#rg_js_continueOperation",purchaseOperationCancel:"#rg_js_cancelOperation",purchaseOptionInfoButton:".rg-purchase-overlay-option-info",purchaseOptionInfoModal:".rev-gen-preview-main-info-modal",paywallRemovalModal:".rev-gen-preview-main-remove-paywall",paywallRemove:"#rg_js_removePaywall",paywallCancelRemove:"#rg_js_cancelPaywallRemoval",activationModal:".rev-gen-preview-main-account-modal",activationModalClose:".rev-gen-preview-main-account-modal-cross",connectAccount:"#rg_js_connectAccount",accountSignup:"#rg_js_signUp",activateAccount:"#rg_js_verifyAccount",reVerifyAccount:"#rg_js_restartVerification",accountActionsWrapper:".rev-gen-preview-main-account-modal-action",accountActionsFields:".rev-gen-preview-main-account-modal-fields",accountCredentialsInfo:".rev-gen-preview-main-account-modal-credentials-info",accountActionId:".rev-gen-preview-main-account-modal-fields-merchant-id",accountActionKey:".rev-gen-preview-main-account-modal-fields-merchant-key",accountActionTitle:".rev-gen-preview-main-account-modal-fields-title",accountActions:".rev-gen-preview-main-account-modal-actions",accountVerificationLoader:".rev-gen-preview-main-account-modal-fields-loader",activationModalError:".rev-gen-preview-main-account-modal-error",activationModalSuccess:".rev-gen-preview-main-account-modal-success",activationModalSuccessTitle:".rev-gen-preview-main-account-modal-success-title",activationModalSuccessMessage:".rev-gen-preview-main-account-modal-success-message",activationModalWarningMessage:".rev-gen-preview-main-account-modal-warning-message",activateSignup:"#rg_js_activateSignup",warningSignup:"#rg_js_warningSignup",viewPost:"#rg_js_viewPost",disablePaywall:"#rg_js_disablePaywall",exitTour:".rev-gen-exit-tour",snackBar:e("#rg_js_SnackBar")},a=function(t){const a={action:"rg_post_permalink",preview_post_id:t,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(e){e.redirect_to&&window.open(e.redirect_to,"_blank")}))},r=function(a){const r={action:"rg_disable_paywall",paywall_id:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:r,dataType:"json"}).done((function(a){e(t.activationModalClose).trigger("click"),t.snackBar.showSnackbar(a.msg,1e3)}))},n=function(){if(1===parseInt(revenueGeneratorGlobalOptions.globalOptions.is_merchant_verified)){t.previewWrapper.find(t.activationModal).remove();const e=wp.template("revgen-account-activation-modal");t.previewWrapper.append(e),t.body.addClass("modal-blur"),t.purchaseOverlay.css({filter:"blur(5px)","pointer-events":"none"}),t.actionsWrapper.css({"background-color":"#a9a9a9"}),t.actionButtons.css({opacity:"0.5"}),t.searchContentWrapper.css({"background-color":"#a9a9a9"})}if(!t.requestSent){t.requestSent=!0,m();const a=e(t.purchaseOptionItems).attr("data-paywall-id"),r={action:"rg_activate_paywall",paywall_id:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:r,dataType:"json"}).done((function(r){t.requestSent=!1,b();const n=t.postPreviewWrapper.attr("data-preview-id"),o=t.paywallName.text().trim(),i=e(t.paywallAppliesTo).val();let s="";if("category"===i||"exclude_category"===i){const e=t.searchPaywallContent.text().trim();s=S(P("category"===i?"Has been published to <b>all posts</b> in category <b>%s</b>.":"Has been published to <b>all posts, except posts under</b> in category <b>%s</b>.","revenue-generator"),e)}else s="supported"===i?S(P("Has been published on <b>%s</b>.","revenue-generator"),e(t.postTitle).text().trim()):P("Has been published on <b>all posts</b>.","revenue-generator");const c=t.previewWrapper.find(t.activationModal),p=c.find(t.activationModalSuccess);p.find(t.activationModalSuccessTitle).text(o),p.find(t.activationModalSuccessMessage).append(e("<p/>").html(s)),p.find(t.viewPost).attr("data-target-id",n),p.find(t.disablePaywall).attr("data-paywall-id",a),c.find(t.activationModalError).remove(),c.find(t.accountActionsWrapper).remove(),c.find(t.accountActionsFields).remove(),!0===r.has_paywalls?p.find(t.activationModalWarningMessage).show():p.find(t.activationModalWarningMessage).hide(),p.css({display:"flex"})}))}},o=function(a,r){if(!t.requestSent){t.requestSent=!0;const o={action:"rg_verify_account_credentials",merchant_id:a,merchant_key:r,security:revenueGeneratorGlobalOptions.rg_paywall_nonce},i=t.previewWrapper.find(t.activationModal);i.find(t.accountActionTitle).text(P("Just a second...","revenue-generator")),i.find(t.accountActionId).remove(),i.find(t.accountCredentialsInfo).remove(),i.find(t.accountActionKey).remove(),i.find(t.accountActions).remove(),i.find(t.accountVerificationLoader).show(),e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:o,dataType:"json"}).done((function(a){if(t.requestSent=!1,i.find(t.accountActionsFields).hide(),!0===a.success){e(t.purchaseOptionItems).attr("data-paywall-id").length?n():(t.isPublish=!0,t.savePaywall.trigger("click"),m(),setTimeout((function(){revenueGeneratorGlobalOptions.globalOptions.is_merchant_verified="1",n(),b()}),2e3))}else t.isPublish=!0,t.savePaywall.trigger("click"),i.find(t.activationModalError).css({display:"flex"})}))}},i=function(e){tippy(e,{arrow:tippy.roundArrow})},s=function(){const e=t.previewWrapper.find(t.activationModal);e.find(t.accountActionsWrapper).hide(),e.find(t.accountActionsFields).css({display:"flex"})},p=function(){t.previewWrapper.find(t.activationModal).remove();const e=wp.template("revgen-account-activation-modal");t.previewWrapper.append(e),t.body.addClass("modal-blur"),t.purchaseOverlay.css({filter:"blur(5px)","pointer-events":"none"}),t.actionsWrapper.css({"background-color":"#a9a9a9"}),t.actionButtons.css({opacity:"0.5"}),t.searchContentWrapper.css({"background-color":"#a9a9a9"})},l=function(){return new Shepherd.Tour({defaultStepOptions:{classes:"rev-gen-tutorial-card",scrollTo:!0}})},u=function(e){const t={text:P("Skip Tour","revenue-generator"),action:e.complete,classes:"shepherd-content-skip-tour"},a={text:P("Next >","revenue-generator"),action:e.next,classes:"shepherd-content-next-tour-element"};e.addStep({id:"rg-main-search-input",text:P("Search for the page or post you'd like to preview with Revenue Generator here.","revenue-generator"),attachTo:{element:".rev-gen-preview-main--search",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-top",buttons:[t,a]}),e.addStep({id:"rg-purchase-overlay-header",text:P("Click to Edit","revenue-generator"),attachTo:{element:".rg-purchase-overlay-title",on:"bottom"},arrow:!0,classes:"rev-gen-tutorial-title",buttons:[a],scrollToHandler:d}),e.addStep({id:"rg-purchase-option-item",text:P("Hover over each element to see the available options.","revenue-generator"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom",buttons:[a]}),e.addStep({id:"rg-purchase-option-item-edit",text:P("Click on the ‘more options’ icon to set the product type (single item purchase, time pass, or subscription).","revenue-generator"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second .rg-purchase-overlay-option-edit",on:"left"},arrow:!0,buttons:[a]}),e.addStep({id:"rg-purchase-option-item-title",text:P("Click on any text element to edit it.","revenue-generator"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second .rg-purchase-overlay-purchase-options-item-info .rg-purchase-overlay-purchase-options-item-info-title",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom",buttons:[a]}),e.addStep({id:"rg-purchase-option-item-price",text:S(P("These are our recommended prices. %1$s%1$sClick to edit; prices lower than 5.00 will default to %2$spay later%3$s.","revenue-generator"),"<br/>",'<a class="info-link" href="https://www.laterpay.net/academy/getting-started-with-laterpay-the-difference-between-pay-now-pay-later" target="_blank" rel="noopener noreferrer">',"</a>"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second .rg-purchase-overlay-purchase-options-item-price",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom",buttons:[a]}),e.addStep({id:"rg-purchase-option-item-add",text:P("Hover below the paywall to get the option to add another purchase button.","revenue-generator"),attachTo:{element:".rg-purchase-overlay-option-area-add-option",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom",buttons:[a]}),e.addStep({id:"rg-purchase-option-paywall-name",text:P("Click here to change the name of your paywall.","revenue-generator"),attachTo:{element:".rev-gen-preview-main-paywall-name",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-bottom",buttons:[a]}),e.addStep({id:"rg-purchase-option-paywall-actions-search",text:P("Select the content that  should display this paywall.","revenue-generator"),attachTo:{element:".rev-gen-preview-main--paywall-actions .rev-gen-preview-main--paywall-actions-search",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-bottom",buttons:[a]}),e.addStep({id:"rg-purchase-option-paywall-publish",text:P("When you’re ready to activate your paywall, connect your LaterPay account.","revenue-generator"),attachTo:{element:".rev-gen-preview-main--paywall-actions-update .rev-gen-preview-main--paywall-actions-update-publish",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-bottom",buttons:[{text:P("Complete","revenue-generator"),action:e.next,classes:"shepherd-content-complete-tour-element"}]})},d=function(t){const a=e(t).offset().top;e("html, body").animate({scrollTop:a-a/4},{duration:800})},h=function(a){e(t.exitTour).css({visibility:"visible","pointer-events":"all",cursor:"pointer"}),t.layoutWrapper.addClass("modal-blur"),t.layoutWrapper.css({"pointer-events":"none"}),e(t.purchaseOptionItem).css({"background-color":"darkgray"}),e(t.purchaseOptionItemInfo).css({"border-right":"1px solid darkgray"});const r=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"],n=function(e){if(r.includes(e.key))return e.preventDefault(),!1};e(document).keydown(n),Shepherd.on("complete",(function(){t.layoutWrapper.removeClass("modal-blur"),t.layoutWrapper.css({"pointer-events":"unset"}),e(t.purchaseOptionItem).css({"background-color":"#fff"}),e(t.purchaseOptionItemInfo).css({"border-right":"1px solid #e3e4e6"}),e(t.exitTour).remove(),e(document).unbind("keydown",n),v()})),a.start()},v=function(){const t={action:"rg_complete_tour",config_key:"is_tutorial_completed",config_value:1,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:t,dataType:"json"}).done((function(e){e.success&&window.location.reload()}))},y=function(a){if(!t.requestSent){t.requestSent=!0;const r={action:"rg_clear_category_meta",rg_category_id:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:r,dataType:"json"}).done((function(){t.requestSent=!1}))}},f=function(a){if(!t.requestSent){t.requestSent=!0;const r={action:"rg_select_preview_content",post_preview_id:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:r,dataType:"json"}).done((function(e){t.requestSent=!1,e.redirect_to&&(window.location.href=e.redirect_to)}))}},g=function(a){if(a.length&&!t.requestSent){t.requestSent=!0;const r={action:"rg_search_preview_content",search_term:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:r,dataType:"json"}).done((function(r){if(t.requestSent=!1,!0===r.success){t.searchResultWrapper.empty(),r.preview_posts.forEach((function(r){const n="post"===r.type?"dashicons-admin-post":"dashicons-admin-page",o=r.title,i=new RegExp(a,"i"),s=o.replace(i,`<b>${a}</b>`),c=e("<span/>",{"data-id":r.id,class:"rev-gen-preview-main--search-results-item dashicons-before"}).append(s);c.addClass(n),t.searchResultWrapper.append(c),t.searchResultWrapper.css({display:"flex"})}))}else t.snackBar.showSnackbar(r.msg,1500)}))}},m=function(){t.laterpayLoader.css({display:"flex"})},b=function(){t.laterpayLoader.hide()},w=function(){const a={action:"rg_remove_paywall",id:e(t.purchaseOptionItems).attr("data-paywall-id"),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(a){t.snackBar.showSnackbar(a.msg,1500),t.purchaseOverlay.remove(),t.actionsWrapper.css({width:"75%","background-color":"rgba(239, 239, 239, 0.3)","backdrop-filter":"blur(10px)"});const r=wp.template("revgen-add-paywall");t.actionsWrapper.empty().append(r),a.preview_id&&e(t.addPaywall).attr("data-preview-id",a.preview_id)}))},_=async function(){const e=await O();return t.previewWrapper.find(t.paywallRemovalModal).remove(),t.body.removeClass("modal-blur"),t.purchaseOverlay.css({filter:"unset","pointer-events":"unset"}),e},O=function(){return new Promise(a=>{t.previewWrapper.find(t.paywallRemovalModal).remove();const r=wp.template("revgen-remove-paywall");t.previewWrapper.append(r),t.body.addClass("modal-blur"),t.purchaseOverlay.css({filter:"blur(5px)","pointer-events":"none"}),e(t.paywallRemove).off("click"),e(t.paywallCancelRemove).off("click"),e(t.paywallRemove).on("click",()=>{e(t.paywallRemovalModal).hide(),a(!0)}),e(t.paywallCancelRemove).on("click",()=>{e(t.paywallRemovalModal).hide(),a(!1)})})},x=async function(e){const a=await k(e);return t.previewWrapper.find(t.purchaseOptionWarningWrapper).remove(),t.body.removeClass("modal-blur"),t.purchaseOverlay.css({filter:"unset","pointer-events":"unset"}),t.actionsWrapper.css({"background-color":"#fff"}),t.actionButtons.css({opacity:"1"}),t.searchContentWrapper.css({"background-color":"#fff"}),a},k=function(a){return new Promise(r=>{t.previewWrapper.find(t.purchaseOptionWarningWrapper).remove();const n=wp.template("revgen-purchase-option-update");t.previewWrapper.append(n);const o=e(t.purchaseOptionWarningWrapper).find(t.purchaseOptionWarningMessage);o.length&&("timepass"===a?o.empty().text(P("The changes you have made will impact this time pass offer on all paywalls across your entire site.","revenue-generator")):"subscription"===a&&o.empty().text(P("The changes you have made will impact this subscription offer on all paywalls across your entire site.","revenue-generator"))),t.body.addClass("modal-blur"),t.purchaseOverlay.css({filter:"blur(5px)","pointer-events":"none"}),t.actionsWrapper.css({"background-color":"#a9a9a9"}),t.actionButtons.css({opacity:"0.5"}),t.searchContentWrapper.css({"background-color":"#a9a9a9"}),e(t.purchaseOperationContinue).off("click"),e(t.purchaseOperationCancel).off("click"),e(t.purchaseOperationContinue).on("click",()=>{e(t.purchaseOptionWarningWrapper).hide(),r(!0)}),e(t.purchaseOperationCancel).on("click",()=>{e(t.purchaseOptionWarningWrapper).hide(),r(!1)})})},G=function(a,r,n=!0){const o={action:"rg_remove_purchase_option",type:a,id:r,paywall_id:e(t.purchaseOptionItems).attr("data-paywall-id"),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:o,dataType:"json"}).done((function(e){!0===n&&t.snackBar.showSnackbar(e.msg,1500)}))},C=function(){const a=e(t.purchaseOptionItems);if(a.length){a.children(t.purchaseOptionItem).each((function(){const a=(100*e(this).find(t.purchaseOptionItemPrice).text().trim()).toFixed(0);e(this).attr("data-lpc-pricing",a)}));const r=a.find("[data-purchase-type='individual']"),n=a.find("[data-purchase-type='timepass']"),o=a.find("[data-purchase-type='subscription']");r.length&&a.prepend(r),n.length&&(n.sort((function(t,a){return+e(t).attr("data-lpc-pricing")-+e(a).attr("data-lpc-pricing")})),a.find("[data-purchase-type='timepass']").remove(),r.length?a.find(r).after(n):a.prepend(n)),o.length&&(o.sort((function(t,a){return+e(t).data("lpc-pricing")-+e(a).data("lpc-pricing")})),a.find("[data-purchase-type='subscription']").remove(),a.append(o)),a.children(t.purchaseOptionItem).each((function(t){const a=t+1;e(this).attr("data-order",a)}))}},W=function(a,r){const n=e(r).find(".rg-purchase-overlay-option-manager"),o=n.find(t.purchaseRevenueWrapper),i=n.find(t.individualPricingWrapper),s=e(r).attr("data-purchase-type");e(r).attr("data-pricing-type","static"),i.find(t.individualPricingSelection).prop("checked",!1),a>=revenueGeneratorGlobalOptions.currency.sis_only_limit?(e(r).find(t.purchaseOptionItemPrice).attr("data-pay-model","sis"),o.find(t.purchaseRevenueSelection).prop("checked",!1),"subscription"!==s&&(e(r).trigger("mouseenter"),e(r).find(t.editOption).trigger("click"))):(a<=revenueGeneratorGlobalOptions.currency.ppu_min||a>revenueGeneratorGlobalOptions.currency.ppu_min)&&a<revenueGeneratorGlobalOptions.currency.sis_min&&(e(r).find(t.purchaseOptionItemPrice).attr("data-pay-model","ppu"),o.find(t.purchaseRevenueSelection).prop("checked",!0),"subscription"!==s&&(e(r).trigger("mouseenter"),e(r).find(t.editOption).trigger("click")))},j=function(a,r){const n=e(a).find(t.purchaseOptionItemPrice),o=parseFloat(n.text().trim()),i=e(a).attr("data-purchase-type"),s=revenueGeneratorGlobalOptions.currency;let c=I(o);if(!1===r&&o<=parseFloat(s.ppu_only_limit))if(c=I(s.sis_min,"subscription"===i),t.snackBar.showSnackbar(P("Pay Now is only available for prices set to $1.99 or higher.","revenue-generator"),2500),"individual"===i){const e=n.children();e.css({display:"none"}),n.text(c).append(e)}else n.empty().text(c);else if(!0===r&&o>parseFloat(s.ppu_max))if(c=I(s.ppu_max,"subscription"===i),t.snackBar.showSnackbar(P("Pay Later is only available for prices set less than $5.","revenue-generator"),2500),"individual"===i){const e=n.children();e.css({display:"none"}),n.text(c).append(e)}else n.empty().text(c)},I=function(e,t){return"number"!=typeof e&&(e=e.replace(/[^0-9\,\.]/g,""),e=parseFloat(e.replace(",",".")).toFixed(2)),isNaN(e)&&(e=0),e=Math.abs(e),t?e<revenueGeneratorGlobalOptions.currency.sis_min?e=revenueGeneratorGlobalOptions.currency.sis_min:e>revenueGeneratorGlobalOptions.currency.sis_max&&(e=revenueGeneratorGlobalOptions.currency.sis_max):(e>revenueGeneratorGlobalOptions.currency.sis_max&&(e=revenueGeneratorGlobalOptions.currency.sis_max),e>0&&e<revenueGeneratorGlobalOptions.currency.ppu_min&&(e=revenueGeneratorGlobalOptions.currency.ppu_min)),e=e.toFixed(2),-1!==revenueGeneratorGlobalOptions.locale.indexOf("de_DE")&&(e=e.replace(".",",")),e},T=function(){t.previewWrapper.find(t.currencyOverlay).remove();const e=wp.template("revgen-purchase-currency-overlay");t.previewWrapper.append(e),t.body.addClass("modal-blur"),t.purchaseOverlay.css({filter:"blur(5px)","pointer-events":"none"})},A=function(a,r){e.ajax({url:a,method:"POST",data:r,dataType:"json"}).done((function(a){b(),t.snackBar.showSnackbar(a.msg,1500);const r=e(t.purchaseOptionItems);r.attr("data-paywall-id",a.paywall_id);const n=r.find("[data-purchase-type='individual']");n.length&&n.attr("data-paywall-id",a.paywall_id);const o=r.find("[data-purchase-type='timepass']");o.length&&o.each((function(){const t=e(this).attr("data-uid");e(this).attr("data-tlp-id",a.time_passes[t])}));const i=r.find("[data-purchase-type='subscription']");i.length&&i.each((function(){const t=e(this).attr("data-uid");e(this).attr("data-sub-id",a.subscriptions[t])})),a.redirect_to&&!1===t.isPublish&&(window.location.href=a.redirect_to)}))},R=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},M=function(t,a){const r=[];let n=24;"y"===t?n=1:"m"===t&&(n=12);for(let t=1;t<=n;t++){const a=e("<option/>",{value:t});a.text(t),r.push(a)}e(a).find("option").remove().end().append(r)};e(document).ready((function(){t.postPreviewWrapper.fadeIn("slow"),e(t.noResultsWrapper).length&&(t.layoutWrapper.css({"background-color":"rgba(0, 0, 0, 0.5)","min-height":"800px"}),t.searchContentWrapper.css({"background-color":"#fff"}),tippy(document.querySelector(".rev-gen-preview-main--search"),{arrow:tippy.roundArrow}).show()),e(t.paywallAppliesTo).trigger("change");const a=e(t.purchaseOptionItems);if(a.length){const e=a.find("[data-purchase-type='individual']");"dynamic"===e.attr("data-pricing-type")&&(e.find(t.purchaseItemPriceIcon).show(),i(".rg-purchase-overlay-purchase-options-item-price-icon"))}if(revenueGeneratorGlobalOptions.globalOptions.average_post_publish_count.length&&0===parseInt(revenueGeneratorGlobalOptions.globalOptions.is_tutorial_completed)){const e=l();u(e),h(e)}})),t.body.on("click",".shepherd-button",(function(){const a=Shepherd.activeTour.getCurrentStep().id;if(e(t.purchaseOptionItem).css({"background-color":"darkgray"}),"rg-purchase-option-item"===a?(e(t.previewSecondItem).trigger("mouseenter"),t.searchContentWrapper.css({"background-color":"#a9a9a9"}),e(t.previewSecondItem).css({"background-color":"#fff"}),e(t.purchaseOptionItemInfo).css({"border-right":"1px solid #e3e4e6"})):"rg-purchase-option-item-price"===a?(e(t.optionArea).trigger("mouseenter"),e(t.previewSecondItem).trigger("mouseleave")):"rg-purchase-option-paywall-name"===a?(e(t.paywallAppliesTo).val("category"),e(t.paywallAppliesTo).trigger("change"),e(t.optionArea).trigger("mouseleave"),Shepherd.activeTour.next(),Shepherd.activeTour.back()):"rg-purchase-option-paywall-publish"===a&&t.activatePaywall.css("background-color","#000"),a){const t=e(`div[data-shepherd-step-id="${a}"]`).offset().top;e("html, body").animate({scrollTop:t})}})),t.body.on("click",t.exitTour,(function(){"undefined"!=typeof Shepherd&&void 0!==Shepherd.activeTour&&Shepherd.activeTour.complete()})),t.postPreviewWrapper.on("click",(function(){t.searchResultWrapper.hide(),t.searchContentWrapper.find("label").show();const a=t.searchContent.val().trim(),r=e(t.postTitle).text().trim();a!==r&&t.searchContent.val(r)})),t.body.on("click",t.searchResultItem,(function(){const t=e(this).attr("data-id");f(t)})),t.searchContent.on("focus",(function(){t.postPreviewWrapper.addClass("blury"),e("html, body").animate({scrollTop:0},"slow"),t.body.css({overflow:"hidden",height:"100%"})})),t.searchContent.on("focusout",(function(){t.body.css({overflow:"auto",height:"auto"}),t.postPreviewWrapper.removeClass("blury")})),t.searchContent.on("input change",c((function(){t.searchContentWrapper.find("label").hide();const a=e(this).val().trim(),r=e(t.postTitle).text().trim();a.length&&a!==r&&g(a)}),500)),t.searchPaywallContent.select2({ajax:{url:revenueGeneratorGlobalOptions.ajaxUrl,dataType:"json",delay:500,type:"POST",data:e=>({term:e.term,action:"rg_search_term",security:revenueGeneratorGlobalOptions.rg_paywall_nonce}),processResults(t){const a=[];return t&&e.each(t.categories,(function(e){const r=t.categories[e];a.push({id:r.term_id,text:r.name})})),{results:a}},cache:!0},placeholder:P("search","revenue-generator"),language:{inputTooShort:()=>P("Please enter 1 or more characters.","revenue-generator"),noResults:()=>P("No results found.","revenue-generator")},minimumInputLength:1}),t.searchPaywallContent.on("change",(function(){const a=e(this).val(),r=t.postPreviewWrapper.attr("data-access-id");r&&y(r),a&&(t.postPreviewWrapper.attr("data-access-id",a),t.savePaywall.removeAttr("disabled"))})),t.previewWrapper.on("click",(function(a){const r=e(a.target),n=r.parent(".rg-purchase-overlay-option-edit").length;r.parents(".rg-purchase-overlay-option-manager").length||e(t.purchaseOptionInfoModal).length||n||t.body.find(".rg-purchase-overlay-option-manager").hide(),r.parents(".rg-purchase-overlay-option-manager").length||(e(".pricing-info-modal").length&&t.body.find("#pricing-info-modal").trigger("click"),e(".revenue-info-modal").length&&t.body.find("#revenue-info-modal").trigger("click"))})),t.body.on("mouseenter",t.purchaseOptionItem,(function(){t.purchaseOverlay.removeClass("overlay-border"),e(t.purchaseOverlayRemove).hide();const a=e(this).find(".rg-purchase-overlay-purchase-options-item-actions");if(a.length)a.show(),e(this).addClass("option-highlight");else{const t=wp.template("revgen-purchase-overlay-actions")();e(this).addClass("option-highlight"),e(this).prepend(t)}})),t.body.on("mouseleave",t.purchaseOptionItem,(function(){e(this).removeClass("option-highlight"),t.body.find(".rg-purchase-overlay-option-manager:visible").length||e(this).find(".rg-purchase-overlay-purchase-options-item-actions").hide()})),t.body.on("click",t.editOption,(function(){const a=e(this).parents(".rg-purchase-overlay-purchase-options-item");let r=a.find(".rg-purchase-overlay-option-manager");const n=e(t.purchaseOptionItems);let o=!1;if(n.children(t.purchaseOptionItem).each((function(){"individual"===e(this).attr("data-purchase-type")&&(o=!0)})),r.length)o&&r.find(".rg-purchase-overlay-option-manager-entity").find("option").filter("[value=individual]").attr("disabled",!0),r.toggle(),a.addClass("option-highlight");else{const n=a.attr("data-purchase-type"),i={entityType:n},s=wp.template("revgen-purchase-overlay-item-manager")(i);a.prepend(s),r=a.find(".rg-purchase-overlay-option-manager");const c=r.find(".rg-purchase-overlay-option-manager-entity");e(".rg-purchase-overlay-option-manager div").css({"border-bottom-color":"#e3e4e6"}),e(".rg-purchase-overlay-option-manager select").css({"border-color":"#e3e4e6"});const p=r.find(t.durationWrapper);if("individual"!==n)r.find(t.individualPricingWrapper).hide(),p.find(t.periodSelection).val(a.attr("data-expiry-duration")),p.find(t.periodCountSelection).val(a.attr("data-expiry-period")),p.show(),o&&c.find("option").filter("[value=individual]").attr("disabled",!0);else{p.hide();const e=a.attr("data-pricing-type"),n=r.find(t.individualPricingWrapper);"dynamic"===e?(n.find(t.individualPricingSelection).prop("checked",!0),n.find(".static-pricing").addClass("unchecked")):(n.find(t.individualPricingSelection).prop("checked",!1),n.find(".dynamic-pricing").addClass("unchecked"))}const l=r.find(t.purchaseRevenueWrapper);"subscription"===n?(r.find("div").css({height:" 55px"}),l.hide()):("ppu"===a.find(t.purchaseOptionItemPrice).attr("data-pay-model")?(l.find(t.purchaseRevenueSelection).prop("checked",!0),l.find(".pay-now").addClass("unchecked")):(l.find(t.purchaseRevenueSelection).prop("checked",!1),l.find(".pay-later").addClass("unchecked")),l.show())}const i=r.css("display"),s=a.find(".rg-purchase-overlay-purchase-options-item-actions");t.body.find(".rg-purchase-overlay-option-manager").hide(),t.body.find(".rg-purchase-overlay-purchase-options-item-actions").hide(),s.show(),r.css({display:i})})),t.body.on("click",t.optionRemove,(function(){const a=e(this).parents(".rg-purchase-overlay-purchase-options-item"),r=a.attr("data-purchase-type");let n;"individual"===r?n=a.attr("data-paywall-id"):"timepass"===r?n=a.attr("data-tlp-id"):"subscription"===r&&(n=a.attr("data-sub-id")),"individual"!==r?x(r).then(e=>{!0===e&&(a.remove(),C(),G(r,n),t.isPublish=!0,t.savePaywall.trigger("click"))}):(a.remove(),C(),G(r,n),t.isPublish=!0,t.savePaywall.trigger("click"))})),t.body.on("change",t.purchaseOptionType,(function(){const a=e(this).parents(".rg-purchase-overlay-option-manager"),r=a.find(".rg-purchase-overlay-option-manager-entity"),n=a.find(t.individualPricingWrapper),o=a.find(t.purchaseRevenueWrapper),i=a.find(t.durationWrapper);"individual"===r.val()?(n.show(),i.hide()):(n.hide(),i.show()),"subscription"===r.val()?o.hide():o.show()})),t.body.on("change",t.individualPricingSelection,(function(){const a=e(this).parents(t.purchaseOptionItem),r=e(this).parents(".rg-purchase-overlay-option-manager"),n=r.find(t.individualPricingSelection),o=r.find(t.individualPricingWrapper);if(n.prop("checked")){const r=e(t.purchaseOptionItems),i=r.attr("data-dynamic-price"),s=r.attr("data-dynamic-revenue"),c=a.find(t.purchaseOptionItemPrice);c.attr("data-pay-model",s);const p=c.children(),l=I(i);p.css({display:"none"}),c.text(l).append(p),a.attr("data-pricing-type","dynamic"),a.find(t.purchaseItemPriceIcon).show(),n.val(1),o.find(".static-pricing").addClass("unchecked"),o.find(".dynamic-pricing").removeClass("unchecked")}else a.attr("data-pricing-type","static"),a.find(t.purchaseItemPriceIcon).hide(),n.val(0),o.find(".static-pricing").removeClass("unchecked"),o.find(".dynamic-pricing").addClass("unchecked")})),t.body.on("change",t.purchaseRevenueSelection,(function(){const a=e(this).parents(t.purchaseOptionItem),r=e(this).parents(".rg-purchase-overlay-option-manager"),n=r.find(t.purchaseRevenueSelection),o=a.find(t.purchaseOptionItemPrice),i=o.attr("data-pay-model"),s=n.val(),c=a.attr("data-purchase-type"),p=r.find(t.purchaseRevenueWrapper);"individual"===c?n.prop("checked")?(o.attr("data-pay-model","ppu"),n.val(1),j(a,!0),p.find(".pay-later").removeClass("unchecked"),p.find(".pay-now").addClass("unchecked")):(o.attr("data-pay-model","sis"),n.val(0),j(a,!1),p.find(".pay-later").addClass("unchecked"),p.find(".pay-now").removeClass("unchecked")):x(c).then(e=>{!0===e?n.prop("checked")?(o.attr("data-pay-model","ppu"),n.val(1),j(a,!0),p.find(".pay-later").removeClass("unchecked"),p.find(".pay-now").addClass("unchecked")):(o.attr("data-pay-model","sis"),n.val(0),j(a,!1),p.find(".pay-later").addClass("unchecked"),p.find(".pay-now").removeClass("unchecked")):(o.attr("data-pay-model",i),n.val(s),n.attr("checked",1===parseInt(s)),j(a,1===parseInt(s)),1===parseInt(s)?(p.find(".pay-later").removeClass("unchecked"),p.find(".pay-now").addClass("unchecked")):(p.find(".pay-later").addClass("unchecked"),p.find(".pay-now").removeClass("unchecked")))})})),t.body.on("change",t.periodSelection,(function(){const a=e(this).parents(".rg-purchase-overlay-option-manager"),r=a.find(t.periodSelection),n=a.find(t.periodCountSelection);M(r.val(),n),e(this).parents(t.purchaseOptionItem).attr("data-expiry-duration",r.val())})),t.body.on("change",t.periodCountSelection,(function(){const a=e(this).parents(".rg-purchase-overlay-option-manager").find(t.periodCountSelection);e(this).parents(t.purchaseOptionItem).attr("data-expiry-period",a.val())})),t.body.on("focus",t.purchaseOptionItemPrice,(function(){const t=e(this).text().trim();e(this).attr("data-current-value",t)})).on("input change",t.purchaseOptionItemPrice,c((function(){const a=e(this).parents(t.purchaseOptionItem),r=a.find(t.purchaseOptionItemPrice),n=e(this).attr("data-current-value"),o=r.text().trim(),i=a.find(t.purchaseOptionPriceSymbol),s=a.attr("data-purchase-type"),c=r.attr("data-pay-model");if(i.text().trim().length||revenueGeneratorGlobalOptions.globalOptions.merchant_currency.length||T(),"individual"!==s)x(s).then(t=>{if(!0===t){const t=I(o,"subscription"===s);e(this).empty().text(t),W(t,a)}else{const t=I(n,"subscription"===s);e(this).empty().text(t),W(t,a)}});else{const t=I(o,"subscription"===s),r=e(this).children();r.css({display:"none"}),e(this).text(t).append(r),W(t,a)}c!==r.attr("data-pay-model")&&("ppu"===r.attr("data-pay-model")?t.snackBar.showSnackbar(P("Pay Now is only available for prices set to $1.99 or higher.","revenue-generator"),2500):t.snackBar.showSnackbar(P("Pay Later is only available for prices set less than $5.","revenue-generator"),2500)),C()}),1e3)),t.body.on("change",t.currencyRadio,(function(){e(this).val().length&&e(t.currencyOverlay).find(t.currencyButton).removeProp("disabled")})),t.body.on("change",t.paywallAppliesTo,(function(){"exclude_category"===e(this).val()||"category"===e(this).val()?(t.searchPaywallWrapper.show(),t.searchPaywallContent.length&&null===t.searchPaywallContent.val()&&t.savePaywall.attr("disabled",!0),t.postPreviewWrapper.attr("data-access-id",t.searchPaywallContent.val())):(t.savePaywall.removeAttr("disabled"),t.searchPaywallWrapper.hide(),t.postPreviewWrapper.attr("data-access-id",t.postPreviewWrapper.attr("data-preview-id")))})),t.body.on("click",t.currencyButton,(function(){const a={action:"rg_update_currency_selection",config_key:"merchant_currency",config_value:e("input:radio[name=currency]:checked").val(),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(r){e(t.currencyModalClose).trigger("click"),t.snackBar.showSnackbar(r.msg,1500),e(t.purchaseOptionItems).children(t.purchaseOptionItem).each((function(){const r=e(this).find(t.purchaseOptionPriceSymbol),n="USD"===a.config_value?"$":"€";r.empty().text(n)}))}))})),t.body.on("click",t.currencyModalClose,(function(){t.previewWrapper.find(t.currencyOverlay).remove(),t.body.removeClass("modal-blur"),t.purchaseOverlay.css({filter:"unset","pointer-events":"unset"})})),t.body.on("mouseenter",t.optionArea,(function(){t.purchaseOverlay.removeClass("overlay-border"),e(t.purchaseOverlayRemove).hide(),e(t.purchaseOptionItems).find(t.purchaseOptionItem).length<5&&e(t.addOptionArea).css({display:"flex"})})),t.body.on("mouseleave",t.optionArea,(function(){e(t.addOptionArea).hide()})),t.body.on("click",t.addOptionArea,(function(){if(e(t.purchaseOptionItems).find(t.purchaseOptionItem).length<5){const a=wp.template("revgen-default-purchase-option-item");e(t.purchaseOptionItems).append(a)}C()})),t.body.on("click",t.purchaseOptionInfoButton,(function(){const a=e(this).attr("data-info-for"),r=t.previewWrapper.find(t.purchaseOptionInfoModal);if(r.length)t.body.removeClass("modal-blur"),r.remove(),e(t.optionManager).css({"background-color":"#fff"}),e(".rg-purchase-overlay-option-manager div").css({"border-bottom-color":"#a9a9a9"}),e(t.optionManager).find("select").css({"background-color":"#fff","border-bottom-color":"#a9a9a9"}),e(t.purchaseOptionItem).css({"background-color":"#fff"}),t.actionsWrapper.css({"background-color":"#fff"}),t.actionButtons.css({opacity:"1"}),t.searchContentWrapper.css({"background-color":"#fff"}),e(t.purchaseRevenueWrapper).css({"background-color":"#fff","border-bottom-color":"unset !important"}),e(t.individualPricingWrapper).css({"background-color":"#fff","border-color":"unset !important"});else{const r=wp.template(`revgen-info-${a}`);t.previewWrapper.append(r),t.body.addClass("modal-blur"),e(t.optionManager).css({"background-color":"#a9a9a9"}),e(".rg-purchase-overlay-option-manager div").css({"border-bottom-color":"#000"}),e(t.optionManager).find("select").css({"background-color":"#a9a9a9","border-color":"#a9a9a9"}),e(t.purchaseOptionItem).css({"background-color":"#a9a9a9"}),t.actionsWrapper.css({"background-color":"#a9a9a9"}),t.actionButtons.css({opacity:"0.5"}),t.searchContentWrapper.css({"background-color":"#a9a9a9"}),"revenue"===a?(e(t.purchaseRevenueWrapper).css({"background-color":"#fff",cursor:"pointer","pointer-events":"all"}),e(t.individualPricingWrapper).css({"background-color":"#a9a9a9"})):(e(t.individualPricingWrapper).css({"background-color":"#fff",cursor:"pointer","pointer-events":"all"}),e(t.purchaseRevenueWrapper).css({"background-color":"#a9a9a9"}))}})),t.purchaseOverlay.on("mouseenter",(function(){e(t.purchaseOptionItems).attr("data-paywall-id").length&&(t.purchaseOverlay.addClass("overlay-border"),e(t.purchaseOverlayRemove).show())})),t.purchaseOverlay.on("mouseleave",(function(){t.purchaseOverlay.removeClass("overlay-border"),e(t.purchaseOverlayRemove).hide()})),t.body.on("click",t.purchaseOverlayRemove,(function(){_().then(e=>{!0===e&&w()})})),t.body.on("click",t.addPaywall,(function(){const a=e(t.addPaywall).attr("data-preview-id");a&&f(a)})),t.body.on("click",t.gotoDashboard,(function(){const t=e(this).attr("data-dashboard-url");t&&(window.location.href=t)})),t.body.on("change",t.entitySelection,(function(){const a=e(this).parents(t.purchaseOptionItem),r=a.attr("data-purchase-type"),n=e(this).val(),o=a.find(".rg-purchase-overlay-option-manager");let i;if(r!==n)if("subscription"===r?i=a.attr("data-sub-id"):"timepass"===r?i=a.attr("data-tlp-id"):"individual"===r&&(i=a.attr("data-paywall-id-id")),"individual"!==r&&x(r).then(n=>{if(!0!==n)return a.attr("data-purchase-type",r),e(this).val(r),!1;G(r,i,!1),t.isPublish=!0,t.savePaywall.trigger("click")}),a.removeAttr("data-purchase-type"),a.removeAttr("data-expiry-duration"),a.removeAttr("data-expiry-period"),a.removeAttr("data-pricing-type"),a.removeAttr("data-paywall-id"),a.removeAttr("data-tlp-id"),a.removeAttr("data-sub-id"),a.removeAttr("data-uid"),a.removeAttr("data-order"),a.attr("data-order",""),a.attr("data-uid",""),a.attr("data-purchase-type",n),e(this).val(n),"individual"!==n){const e=a.find(t.purchaseOptionItemPrice);if(e.removeAttr("data-pay-model"),"timepass"===n){const r=revenueGeneratorGlobalOptions.defaultConfig.timepass;a.attr("data-tlp-id",""),a.attr("data-expiry-duration",r.duration),a.attr("data-expiry-period",r.period),e.attr("data-pay-model",r.revenue),e.text(r.price),a.find(t.purchaseOptionItemTitle).text(r.title),a.find(t.purchaseOptionItemDesc).text(r.description),o.find("div").css({height:" 45px"})}else if("subscription"===n){const r=revenueGeneratorGlobalOptions.defaultConfig.subscription;a.attr("data-sub-id",""),a.attr("data-expiry-duration",r.duration),a.attr("data-expiry-period",r.period),e.attr("data-pay-model",r.revenue),e.text(r.price),a.find(t.purchaseOptionItemTitle).text(r.title),a.find(t.purchaseOptionItemDesc).text(r.description),o.find("div").css({height:" 55px"})}}else a.attr("data-pricing-type","static"),a.attr("data-paywall-id",""),o.find("div").css({height:" 45px"})})),t.savePaywall.on("click",(function(){m(),C();const a=e(t.purchaseOptionItems);a.children(t.purchaseOptionItem).each((function(){e(this).attr("data-uid")||e(this).attr("data-uid",R())}));const r=a.find("[data-purchase-type='individual']");let n;r.length&&(n={title:r.find(t.purchaseOptionItemTitle).text().trim(),desc:r.find(t.purchaseOptionItemDesc).text().trim(),price:r.find(t.purchaseOptionItemPrice).text().trim(),revenue:r.find(t.purchaseOptionItemPrice).attr("data-pay-model"),type:r.attr("data-pricing-type"),order:r.attr("data-order")});const o=a.find("[data-purchase-type='timepass']"),i=[];o.each((function(){const a=e(this),r={title:a.find(t.purchaseOptionItemTitle).text().trim(),desc:a.find(t.purchaseOptionItemDesc).text().trim(),price:a.find(t.purchaseOptionItemPrice).text().trim(),revenue:e(a.find(t.purchaseOptionItemPrice)).attr("data-pay-model"),duration:e(a).attr("data-expiry-duration"),period:e(a).attr("data-expiry-period"),tlp_id:e(a).attr("data-tlp-id"),uid:e(a).attr("data-uid"),order:e(a).attr("data-order")};i.push(r)}));const s=a.find("[data-purchase-type='subscription']"),c=[];s.each((function(){const a=e(this),r={title:a.find(t.purchaseOptionItemTitle).text().trim(),desc:a.find(t.purchaseOptionItemDesc).text().trim(),price:a.find(t.purchaseOptionItemPrice).text().trim(),revenue:e(a.find(t.purchaseOptionItemPrice)).attr("data-pay-model"),duration:e(a).attr("data-expiry-duration"),period:e(a).attr("data-expiry-period"),sub_id:e(a).attr("data-sub-id"),uid:e(a).attr("data-uid"),order:e(a).attr("data-order")};c.push(r)}));const p={id:a.attr("data-paywall-id"),title:t.purchaseOverlay.find(t.paywallTitle).text().trim(),desc:t.purchaseOverlay.find(t.paywallDesc).text().trim(),name:t.paywallName.text().trim(),applies:e(t.paywallAppliesTo).val(),preview_id:t.postPreviewWrapper.attr("data-preview-id")},l={action:"rg_update_paywall",post_id:t.postPreviewWrapper.attr("data-access-id"),paywall:p,individual:n,time_passes:i,subscriptions:c,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};A(revenueGeneratorGlobalOptions.ajaxUrl,l)})),t.body.on("click",t.reVerifyAccount,(function(e){e.preventDefault(),p()})),t.activatePaywall.on("click",(function(){0===parseInt(revenueGeneratorGlobalOptions.globalOptions.is_merchant_verified)?p():(t.isPublish=!0,t.savePaywall.trigger("click"),m(),setTimeout((function(){n(),b(),t.isPublish=!1}),1500))})),t.body.on("click",t.connectAccount,(function(){s()})),t.body.on("click",t.accountSignup,(function(){if(revenueGeneratorGlobalOptions.globalOptions.merchant_region.length){const e=revenueGeneratorGlobalOptions.globalOptions.merchant_region,t=revenueGeneratorGlobalOptions.signupURL;"US"===e?window.open(t.US,"_blank"):window.open(t.EU,"_blank"),s()}})),t.body.on("click",t.activateSignup,(function(){if(revenueGeneratorGlobalOptions.globalOptions.merchant_region.length){const e=revenueGeneratorGlobalOptions.globalOptions.merchant_region,t=revenueGeneratorGlobalOptions.signupURL;"US"===e?window.open(t.US,"_blank"):window.open(t.EU,"_blank")}})),t.body.on("click",t.warningSignup,(function(){if(revenueGeneratorGlobalOptions.globalOptions.merchant_region.length){const e=revenueGeneratorGlobalOptions.globalOptions.merchant_region,t=revenueGeneratorGlobalOptions.signupURL;"US"===e?window.open(t.US,"_blank"):window.open(t.EU,"_blank")}})),t.body.on("click",t.activationModalClose,(function(){t.previewWrapper.find(t.activationModal).remove(),t.body.removeClass("modal-blur"),t.purchaseOverlay.css({filter:"unset","pointer-events":"unset"}),t.actionsWrapper.css({"background-color":"#fff"}),t.actionButtons.css({opacity:"1"}),t.searchContentWrapper.css({"background-color":"#fff"})})),t.body.on("input change",t.accountActionId,(function(){const a=t.previewWrapper.find(t.activationModal),r=a.find(t.accountActionId).val().trim(),n=a.find(t.accountActionKey).val().trim();r.length&&n.length&&e(t.activateAccount).removeAttr("disabled")})),t.body.on("input change",t.accountActionKey,(function(){const a=t.previewWrapper.find(t.activationModal),r=a.find(t.accountActionId).val().trim(),n=a.find(t.accountActionKey).val().trim();r.length&&n.length&&e(t.activateAccount).removeAttr("disabled")})),t.body.on("click",t.activateAccount,(function(){const e=t.previewWrapper.find(t.activationModal),a=e.find(t.accountActionId).val().trim(),r=e.find(t.accountActionKey).val().trim();o(a,r)})),t.body.on("click",t.viewPost,(function(){const t=e(this).attr("data-target-id");t&&a(t)})),t.body.on("click",t.disablePaywall,(function(){const t=e(this).attr("data-paywall-id");t&&r(t)})),function(){if(t.postContent){t.postContent.addClass("blur-content");const e=wp.template("revgen-purchase-overlay");t.purchaseOverlay.append(e),t.purchaseOverlay.show()}}()}()}))}(jQuery),function(e){e((function(){!function(){const t={body:e("body"),requestSent:!1,paywallContent:".rev-gen-dashboard-content",paywallPreview:".rev-gen-dashboard-content-paywall-preview",paywallContentWrapper:".rev-gen-dashboard-content-paywall",newPaywall:e("#rg_js_newPaywall"),sortPaywalls:e("#rg_js_filterPaywalls"),searchPaywall:e("#rg_js_searchPaywall"),searchResultWrapper:e(".rev-gen-dashboard-bar--search-results"),searchResultItem:".rev-gen-dashboard-bar--search-results-item",editPayWallName:e(".rev-gen-dashboard-paywall-name"),restartTour:e("#rg_js_RestartTutorial"),snackBar:e("#rg_js_SnackBar")},a=function(a){if(a.length&&!t.requestSent){t.requestSent=!0;const r={action:"rg_search_paywall",search_term:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:r,dataType:"json"}).done((function(a){if(t.requestSent=!1,!0===a.success){t.searchResultWrapper.empty(),a.paywalls.forEach((function(a){const r=e("<span/>",{"data-id":a.id,class:"rev-gen-dashboard-bar--search-results-item"}).text(a.name);t.searchResultWrapper.append(r),t.searchResultWrapper.css({display:"inline-flex"})}))}else t.snackBar.showSnackbar(a.msg,1500)}))}};t.body.on("click",t.paywallPreview,(function(){const a=e(this).closest(t.paywallContentWrapper).attr("data-paywall-id");a&&(window.location.href=revenueGeneratorGlobalOptions.paywallPageBase+"&current_paywall="+a)})),t.restartTour.on("click",(function(){const a={action:"rg_restart_tour",restart_tour:"1",security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(e){!0===e.success&&(window.location=t.newPaywall.attr("href"))}))})),t.sortPaywalls.on("change",(function(){const t=e(this).val(),a={action:"rg_set_paywall_order",rg_current_url:window.location.href,rg_sort_order:t,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(e){!0===e.success&&e.redirect_to&&(window.location.href=e.redirect_to)}))})),t.searchPaywall.on("focus",(function(){e(t.paywallContent).addClass("blury"),t.body.css({overflow:"hidden",height:"100%"}),e(this).val().trim().length&&t.searchPaywall.trigger("change")})),t.searchPaywall.on("focusout",(function(){t.body.css({overflow:"auto",height:"auto"}),e(t.paywallContent).removeClass("blury")})),e(t.paywallContent).on("click",(function(){t.body.css({overflow:"auto",height:"auto"}),e(t.paywallContent).removeClass("blury"),e(t.searchResultWrapper).css({display:"none"})})),t.searchPaywall.on("input change",c((function(){const t=e(this).val().trim();t.length&&a(t)}),1500)),t.body.on("click",t.searchResultItem,(function(){const t=e(this).attr("data-id");t&&(window.location.href=revenueGeneratorGlobalOptions.paywallPageBase+"&current_paywall="+t)})),t.editPayWallName.on("focusout",(function(){if(!t.requestSent){t.requestSent=!0,e(t.paywallContent).addClass("blury"),t.body.css({overflow:"hidden",height:"100%"});const a={action:"rg_set_paywall_name",new_paywall_name:e(this).text().trim(),paywall_id:e(this).closest(t.paywallContentWrapper).attr("data-paywall-id"),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(a){t.snackBar.showSnackbar(a.msg,1500),t.body.css({overflow:"auto",height:"auto"}),e(t.paywallContent).removeClass("blury"),t.requestSent=!1}))}}))}()}))}(jQuery)}]);