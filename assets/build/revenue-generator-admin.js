!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=9)}([function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return C}));var n,r,o,i,s=a(4),c=a.n(s),l=a(2),p=a.n(l),d=c()(console.error);function u(e){try{for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return p.a.sprintf.apply(p.a,[e].concat(a))}catch(t){return d("sprintf error: \n\n"+t.toString()),e}}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}n={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},r=["(","?"],o={")":["("],":":["?","?:"]},i=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;var g={"!":function(e){return!e},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"?:":function(e,t,a){if(e)throw t;return a}};function f(e){var t=function(e){for(var t,a,s,c,l=[],p=[];t=e.match(i);){for(a=t[0],(s=e.substr(0,t.index).trim())&&l.push(s);c=p.pop();){if(o[a]){if(o[a][0]===c){a=o[a][1]||a;break}}else if(r.indexOf(c)>=0||n[c]<n[a]){p.push(c);break}l.push(c)}o[a]||p.push(a),e=e.substr(t.index+a.length)}return(e=e.trim())&&l.push(e),l.concat(p.reverse())}(e);return function(e){return function(e,t){var a,n,r,o,i,s,c=[];for(a=0;a<e.length;a++){if(i=e[a],o=g[i]){for(n=o.length,r=Array(n);n--;)r[n]=c.pop();try{s=o.apply(null,r)}catch(e){return e}}else s=t.hasOwnProperty(i)?t[i]:+i;c.push(s)}return c[0]}(t,e)}}var y={contextDelimiter:"",onMissingKey:null};function v(e,t){var a;for(a in this.data=e,this.pluralForms={},this.options={},y)this.options[a]=void 0!==t&&a in t?t[a]:y[a]}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}v.prototype.getPluralForm=function(e,t){var a,n,r,o,i=this.pluralForms[e];return i||("function"!=typeof(r=(a=this.data[e][""])["Plural-Forms"]||a["plural-forms"]||a.plural_forms)&&(n=function(e){var t,a,n;for(t=e.split(";"),a=0;a<t.length;a++)if(0===(n=t[a].trim()).indexOf("plural="))return n.substr(7)}(a["Plural-Forms"]||a["plural-forms"]||a.plural_forms),o=f(n),r=function(e){return+o({n:e})}),i=this.pluralForms[e]=r),i(t)},v.prototype.dcnpgettext=function(e,t,a,n,r){var o,i,s;return o=void 0===r?0:this.getPluralForm(e,r),i=a,t&&(i=t+this.options.contextDelimiter+a),(s=this.data[e][i])&&s[o]?s[o]:(this.options.onMissingKey&&this.options.onMissingKey(a,e),0===o?a:n)};var w,_,O,k,P,x,G={"":{plural_forms:function(e){return 1===e?0:1}}},S=(O=new v({}),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";O.data[t]=b(b(b({},G),O.data[t]),e),O.data[t][""]=b(b({},G[""]),O.data[t][""])},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return O.data[e]||k(void 0,e),O.dcnpgettext(e,t,a,n,r)},x=function(e,t,a){return P(a,t,e)},w&&k(w,_),{setLocaleData:k,__:function(e,t){return P(t,void 0,e)},_x:x,_n:function(e,t,a,n){return P(n,void 0,e,t,a)},_nx:function(e,t,a,n,r){return P(r,n,e,t,a)},isRTL:function(){return"rtl"===x("ltr","text direction")}}),C=(S.setLocaleData.bind(S),S.__.bind(S));S._x.bind(S),S._n.bind(S),S._nx.bind(S),S.isRTL.bind(S)},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0);const r={contribution:{steps:{preview:{type:{id:"rg-tutorial-contribution-box",text:Object(n.a)("This is a preview of your selected Contribution type.","revenue-generator")+"<br><br>"+Object(n.a)("Click on text to edit it.","revenue-generator"),attachTo:{element:".rev-gen-contribution__inner",on:"bottom"},buttons:["skip","next"],classes:"fade-in",tracking:{category:"LP RevGen Contributions Tutorial",event:"1 - Text Edit",action:"Continue"}},amount:{id:"rg-tutorial-contribution-amount",text:Object(n.a)("Click to edit each amount.","revenue-generator")+"<br><br>"+Object(n.b)(Object(n.a)("Amounts less than $5 will default to %1$spay later%2$s.","revenue-generator"),'<a target="_blank" href="https://www.laterpay.net/academy/getting-started-with-laterpay-the-difference-between-pay-now-pay-later">',"</a>"),attachTo:{element:".rev-gen-contribution__donation",on:"top"},buttons:["skip","next"],classes:"fade-in",tracking:{category:"LP RevGen Contributions Tutorial",event:"2 - Amount Edit",action:"Continue"}}},builder:{name:{id:"rg-tutorial-campaign-name",text:Object(n.a)("Enter the description that you would like to appear on your customer’s invoice.","revenue-generator"),attachTo:{element:"#rg-contribution-campaign-name",on:"top"},buttons:["skip","next"],classes:"fade-in",tracking:{category:"LP RevGen Contributions Tutorial",event:"3 - Campaign Name",action:"Continue"}},submit:{id:"rg-tutorial-submit",text:Object(n.b)(Object(n.a)("When you’re ready, click here to copy your customized %1$sshortcode%2$s.","revenue-generator"),'<a target="_blank" href="https://wordpress.com/support/shortcodes/">',"</a>"),attachTo:{element:"#rg-contribution-submit",on:"top"},buttons:["skip","gotIt"],classes:"fade-in",tracking:{category:"LP RevGen Contributions Tutorial",event:"4 - Generate Code",action:"Complete"}}}}},buttons:{skip:{text:Object(n.a)("Skip Tour","revenue-generator"),action:"cancel",classes:"shepherd-content-skip-tour"},next:{text:Object(n.a)("Next","revenue-generator"),action:"next",classes:"shepherd-content-next-tour-element"},gotIt:{text:Object(n.a)("Got it!","revenue-generator"),action:"next",classes:"shepherd-content-next-tour-element"}}}},function(e,t,a){var n;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(e){return s(l(e),arguments)}function i(e,t){return o.apply(null,[e].concat(t||[]))}function s(e,t){var a,n,i,s,c,l,p,d,u,h=1,g=e.length,f="";for(n=0;n<g;n++)if("string"==typeof e[n])f+=e[n];else if("object"==typeof e[n]){if((s=e[n]).keys)for(a=t[h],i=0;i<s.keys.length;i++){if(null==a)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[i],s.keys[i-1]));a=a[s.keys[i]]}else a=s.param_no?t[s.param_no]:t[h++];if(r.not_type.test(s.type)&&r.not_primitive.test(s.type)&&a instanceof Function&&(a=a()),r.numeric_arg.test(s.type)&&"number"!=typeof a&&isNaN(a))throw new TypeError(o("[sprintf] expecting number but found %T",a));switch(r.number.test(s.type)&&(d=a>=0),s.type){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,s.width?parseInt(s.width):0);break;case"e":a=s.precision?parseFloat(a).toExponential(s.precision):parseFloat(a).toExponential();break;case"f":a=s.precision?parseFloat(a).toFixed(s.precision):parseFloat(a);break;case"g":a=s.precision?String(Number(a.toPrecision(s.precision))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=s.precision?a.substring(0,s.precision):a;break;case"t":a=String(!!a),a=s.precision?a.substring(0,s.precision):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=s.precision?a.substring(0,s.precision):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=s.precision?a.substring(0,s.precision):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase()}r.json.test(s.type)?f+=a:(!r.number.test(s.type)||d&&!s.sign?u="":(u=d?"+":"-",a=a.toString().replace(r.sign,"")),l=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",p=s.width-(u+a).length,c=s.width&&p>0?l.repeat(p):"",f+=s.align?u+a+c:"0"===l?u+c+a:c+u+a)}return f}var c=Object.create(null);function l(e){if(c[e])return c[e];for(var t,a=e,n=[],o=0;a;){if(null!==(t=r.text.exec(a)))n.push(t[0]);else if(null!==(t=r.modulo.exec(a)))n.push("%");else{if(null===(t=r.placeholder.exec(a)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var i=[],s=t[2],l=[];if(null===(l=r.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i.push(l[1]);""!==(s=s.substring(l[0].length));)if(null!==(l=r.key_access.exec(s)))i.push(l[1]);else{if(null===(l=r.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(l[1])}t[2]=i}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}a=a.substring(t[0].length)}return c[e]=n}t.sprintf=o,t.vsprintf=i,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=i,void 0===(n=function(){return{sprintf:o,vsprintf:i}}.call(t,a,t,e))||(e.exports=n))}()},function(e,t){var a;(a=jQuery).fn.showSnackbar=function(e,t){const n=a(this);n.text(e),n.addClass("rev-gen-snackbar--show"),setTimeout((function(){n.removeClass("rev-gen-snackbar--show")}),t)}},function(e,t,a){e.exports=function(e,t){var a,n,r=0;function o(){var o,i,s=a,c=arguments.length;e:for(;s;){if(s.args.length===arguments.length){for(i=0;i<c;i++)if(s.args[i]!==arguments[i]){s=s.next;continue e}return s!==a&&(s===n&&(n=s.prev),s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.next=a,s.prev=null,a.prev=s,a=s),s.val}s=s.next}for(o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];return s={args:o,val:e.apply(null,o)},a?(a.prev=s,s.next=a):n=s,r===t.maxSize?(n=n.prev).next=null:r++,a=s,s.val}return t=t||{},o.clear=function(){a=null,n=null,r=0},o}},function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(1);class r{constructor(e){this.options={stepOptions:{classes:"rev-gen-tutorial-card",scrollTo:{behavior:"smooth",block:"center"}},autoStart:!0,context:"",steps:{},trackCallback:()=>{},onComplete:()=>{},...e},this.init()}init(){const e=this;this.tour=new Shepherd.Tour({defaultStepOptions:e.options.stepOptions}),this.addTourSteps(),this.options.autoStart&&this.tour.start(),Shepherd.on("complete",()=>{const t=Shepherd.activeTour.getCurrentStep().options.tracking;e.options.trackCallback(t),e.options.onComplete()}),Shepherd.on("cancel",()=>{const t=Shepherd.activeTour.getCurrentStep().options.tracking;"Continue"===t.action&&(t.action="Exit Tour"),e.options.trackCallback(t)})}addTourSteps(){const e=this,t=this.options.steps,a=n.a.buttons;Object.keys(a).forEach((function(t){const n=a[t];a[t].action=e.tour[n.action]})),Object.keys(t).forEach((function(n){const r=t[n],o=[];r.buttons.forEach(e=>{o.push(a[e])}),r.buttons=o;const i=e.tour.addStep(r).on("before-hide",()=>{const e=i.options.classes;i.options.classes=e.replace("fade-in","fade-out"),i.updateStepOptions(i.options)}).on("hide",()=>{"function"==typeof e.options.trackCallback&&e.options.trackCallback(i.options.tracking),i.el.removeAttribute("hidden"),setTimeout(()=>{i.el.setAttribute("hidden","")},700)})}))}}},function(e,t,a){"use strict";var n=a(10),r=a(11),o=a(8);e.exports={formats:o,parse:r,stringify:n}},function(e,t,a){"use strict";var n=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var a=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(a[n]=e[n]);return a};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce((function(e,a){return e[a]=t[a],e}),e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],a=[],n=0;n<t.length;++n)for(var r=t[n],o=r.obj[r.prop],i=Object.keys(o),s=0;s<i.length;++s){var c=i[s],l=o[c];"object"==typeof l&&null!==l&&-1===a.indexOf(l)&&(t.push({obj:o,prop:c}),a.push(l))}return function(e){for(var t;e.length;){var a=e.pop();if(t=a.obj[a.prop],Array.isArray(t)){for(var n=[],r=0;r<t.length;++r)void 0!==t[r]&&n.push(t[r]);a.obj[a.prop]=n}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),a="",n=0;n<t.length;++n){var o=t.charCodeAt(n);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?a+=t.charAt(n):o<128?a+=r[o]:o<2048?a+=r[192|o>>6]+r[128|63&o]:o<55296||o>=57344?a+=r[224|o>>12]+r[128|o>>6&63]+r[128|63&o]:(n+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(n)),a+=r[240|o>>18]+r[128|o>>12&63]+r[128|o>>6&63]+r[128|63&o])}return a},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,a,r){if(!a)return t;if("object"!=typeof a){if(Array.isArray(t))t.push(a);else{if("object"!=typeof t)return[t,a];(r.plainObjects||r.allowPrototypes||!n.call(Object.prototype,a))&&(t[a]=!0)}return t}if("object"!=typeof t)return[t].concat(a);var i=t;return Array.isArray(t)&&!Array.isArray(a)&&(i=o(t,r)),Array.isArray(t)&&Array.isArray(a)?(a.forEach((function(a,o){n.call(t,o)?t[o]&&"object"==typeof t[o]?t[o]=e(t[o],a,r):t.push(a):t[o]=a})),t):Object.keys(a).reduce((function(t,o){var i=a[o];return n.call(t,o)?t[o]=e(t[o],i,r):t[o]=i,t}),i)}}},function(e,t,a){"use strict";var n=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,r,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,a){a(19),e.exports=a(12)},function(e,t,a){"use strict";var n=a(7),r=a(8),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},i=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return i.call(e)},skipNulls:!1,strictNullHandling:!1},c=function e(t,a,r,o,i,c,l,p,d,u,h,g){var f=t;if("function"==typeof l)f=l(a,f);else if(f instanceof Date)f=u(f);else if(null===f){if(o)return c&&!g?c(a,s.encoder):a;f=""}if("string"==typeof f||"number"==typeof f||"boolean"==typeof f||n.isBuffer(f))return c?[h(g?a:c(a,s.encoder))+"="+h(c(f,s.encoder))]:[h(a)+"="+h(String(f))];var y,v=[];if(void 0===f)return v;if(Array.isArray(l))y=l;else{var m=Object.keys(f);y=p?m.sort(p):m}for(var b=0;b<y.length;++b){var w=y[b];i&&null===f[w]||(v=Array.isArray(f)?v.concat(e(f[w],r(a,w),r,o,i,c,l,p,d,u,h,g)):v.concat(e(f[w],a+(d?"."+w:"["+w+"]"),r,o,i,c,l,p,d,u,h,g)))}return v};e.exports=function(e,t){var a=e,i=t?n.assign({},t):{};if(null!==i.encoder&&void 0!==i.encoder&&"function"!=typeof i.encoder)throw new TypeError("Encoder has to be a function.");var l=void 0===i.delimiter?s.delimiter:i.delimiter,p="boolean"==typeof i.strictNullHandling?i.strictNullHandling:s.strictNullHandling,d="boolean"==typeof i.skipNulls?i.skipNulls:s.skipNulls,u="boolean"==typeof i.encode?i.encode:s.encode,h="function"==typeof i.encoder?i.encoder:s.encoder,g="function"==typeof i.sort?i.sort:null,f=void 0!==i.allowDots&&i.allowDots,y="function"==typeof i.serializeDate?i.serializeDate:s.serializeDate,v="boolean"==typeof i.encodeValuesOnly?i.encodeValuesOnly:s.encodeValuesOnly;if(void 0===i.format)i.format=r.default;else if(!Object.prototype.hasOwnProperty.call(r.formatters,i.format))throw new TypeError("Unknown format option provided.");var m,b,w=r.formatters[i.format];"function"==typeof i.filter?a=(b=i.filter)("",a):Array.isArray(i.filter)&&(m=b=i.filter);var _,O=[];if("object"!=typeof a||null===a)return"";_=i.arrayFormat in o?i.arrayFormat:"indices"in i?i.indices?"indices":"repeat":"indices";var k=o[_];m||(m=Object.keys(a)),g&&m.sort(g);for(var P=0;P<m.length;++P){var x=m[P];d&&null===a[x]||(O=O.concat(c(a[x],x,k,p,d,u?h:null,b,g,f,y,w,v)))}var G=O.join(l),S=!0===i.addQueryPrefix?"?":"";return G.length>0?S+G:""}},function(e,t,a){"use strict";var n=a(7),r=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},i=function(e,t,a){if(e){var n=a.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(n),s=i?n.slice(0,i.index):n,c=[];if(s){if(!a.plainObjects&&r.call(Object.prototype,s)&&!a.allowPrototypes)return;c.push(s)}for(var l=0;null!==(i=o.exec(n))&&l<a.depth;){if(l+=1,!a.plainObjects&&r.call(Object.prototype,i[1].slice(1,-1))&&!a.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+n.slice(i.index)+"]"),function(e,t,a){for(var n=t,r=e.length-1;r>=0;--r){var o,i=e[r];if("[]"===i)o=(o=[]).concat(n);else{o=a.plainObjects?Object.create(null):{};var s="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,c=parseInt(s,10);!isNaN(c)&&i!==s&&String(c)===s&&c>=0&&a.parseArrays&&c<=a.arrayLimit?(o=[])[c]=n:o[s]=n}n=o}return n}(c,t,a)}};e.exports=function(e,t){var a=t?n.assign({},t):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!=typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"==typeof a.delimiter||n.isRegExp(a.delimiter)?a.delimiter:o.delimiter,a.depth="number"==typeof a.depth?a.depth:o.depth,a.arrayLimit="number"==typeof a.arrayLimit?a.arrayLimit:o.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"==typeof a.decoder?a.decoder:o.decoder,a.allowDots="boolean"==typeof a.allowDots?a.allowDots:o.allowDots,a.plainObjects="boolean"==typeof a.plainObjects?a.plainObjects:o.plainObjects,a.allowPrototypes="boolean"==typeof a.allowPrototypes?a.allowPrototypes:o.allowPrototypes,a.parameterLimit="number"==typeof a.parameterLimit?a.parameterLimit:o.parameterLimit,a.strictNullHandling="boolean"==typeof a.strictNullHandling?a.strictNullHandling:o.strictNullHandling,""===e||null==e)return a.plainObjects?Object.create(null):{};for(var s="string"==typeof e?function(e,t){for(var a={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,s=n.split(t.delimiter,i),c=0;c<s.length;++c){var l,p,d=s[c],u=d.indexOf("]="),h=-1===u?d.indexOf("="):u+1;-1===h?(l=t.decoder(d,o.decoder),p=t.strictNullHandling?null:""):(l=t.decoder(d.slice(0,h),o.decoder),p=t.decoder(d.slice(h+1),o.decoder)),r.call(a,l)?a[l]=[].concat(a[l]).concat(p):a[l]=p}return a}(e,a):e,c=a.plainObjects?Object.create(null):{},l=Object.keys(s),p=0;p<l.length;++p){var d=l[p],u=i(d,s[d],a);c=n.merge(c,u,a)}return n.compact(c)}},function(e,t,a){},,,,,,,function(e,t,a){"use strict";a.r(t);a(3);var n,r=function(e,t){let a;return function(){const n=this,r=arguments;clearTimeout(a),a=setTimeout((function(){e.apply(n,r)}),t)}};(n=jQuery)((function(){!function(){const e={body:n("body"),requestSent:!1,somethingChanged:!1,settingsMerchantID:".rev-gen-settings-main-merchant-id",settingsMerchantKey:".rev-gen-settings-main-merchant-key",settingsModalClose:".rev-gen-settings-main-info-modal-cross",rgDashboard:".rev-gen-dashboard-main",helpGAButton:".rev-gen-settings-main-option-info",helpGAModal:".rev-gen-settings-main-info-modal",rgGALaterpayRow:".rg-laterpay-row",rgGAUserRow:".rg-user-row",laterpayLoader:n(".laterpay-loader-wrapper"),rgLayoutWrapper:n(".rev-gen-layout-wrapper"),settingsWrapper:n(".rev-gen-settings-main"),settingsPerMonth:n(".rev-gen-settings-main-post-per-month"),settingsGAUserID:n(".rev-gen-settings-main-ga-code-user"),settingsSaveButton:n(".rev-gen-settings-main-save-settings"),rgGAUserStatus:n("#rgGAUserStatus"),rgGALaterPayStatus:n("#rgGALaterPayStatus"),snackBar:n("#rg_js_SnackBar"),everyInput:n("table.rev-gen-settings-main-table input"),triggerPopup:n(".triggerPopup")},t=function(){e.laterpayLoader.css("display","flex")},a=function(t){n.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:t,dataType:"json"}).done((function(t){e.laterpayLoader.hide(),e.snackBar.showSnackbar(t.data.msg,1500),t.data.merchant?(o(e.settingsMerchantID),o(e.settingsMerchantKey)):(i(e.settingsMerchantID),i(e.settingsMerchantKey)),e.requestSent=!1}))},o=function(e){n(e).css("border-color","#19e4ac"),setTimeout((function(){n(e).removeAttr("style")}),5e3)},i=function(e){n(e).css("border-color","#ff1939"),setTimeout((function(){n(e).removeAttr("style")}),5e3)},s=function(e){if(!0===e)return t=window,a=document,n="script",r="rgga",t.GoogleAnalyticsObject=r,t[r]=t[r]||function(){(t[r].q=t[r].q||[]).push(arguments)},t[r].l=1*new Date,o=a.createElement(n),i=a.getElementsByTagName(n)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(o,i),window[window.GoogleAnalyticsObject||"rgga"];var t,a,n,r,o,i},c=function(e,t,a,n,r,o){const i=s(e);"function"==typeof i&&(i("create",revenueGeneratorGlobalOptions.rg_tracking_id,"auto","rgParentTracker"),i("rgParentTracker.send","event",{eventCategory:n,eventAction:a,eventLabel:t,eventValue:r,nonInteraction:o}))},l=function(e,t,a,n,r,o){const i=s(e);"function"==typeof i&&(i("create",revenueGeneratorGlobalOptions.rg_user_tracking_id,"auto","rgUserTracker"),i("rgUserTracker.send","event",{eventCategory:n,eventAction:a,eventLabel:t,eventValue:r,nonInteraction:o}))},p=function(e,t,a,n,r,o,i,s){e("create",t,"auto",a),e(a+".send","event",{eventCategory:o,eventAction:n,eventLabel:r,eventValue:i,nonInteraction:s})};window.rgGlobal={sendLPGAEvent(e,t,a,n,r){void 0===r&&(r=!1);let o=!1;const i=function(){if("boolean"==typeof window.mi_track_user&&!0===window.mi_trac_user)return window[window.GoogleAnalyticsObject||"__gaTracker"]}();let s="";const d=revenueGeneratorGlobalOptions.rg_user_tracking_id,u=revenueGeneratorGlobalOptions.rg_tracking_id;d.length>0&&u.length>0?"function"==typeof i?(s=i.getAll(),s.forEach((function(s){if(d===s.get("trackingId")){o=!0;const c=s.get("name");i(c+".send","event",{eventCategory:t,eventAction:e,eventLabel:a,eventValue:n,nonInteraction:r})}})),!0===o?p(u,"rgParentTracker",e,a,t,n,r):(p(i,u,"rgParentTracker",e,a,t,n,r),p(i,d,"rgUserTracker",e,a,t,n,r))):(c(!0,a,e,t,n,r),l(!0,a,e,t,n,r)):d.length>0&&0===u.length?"function"==typeof i?(s=i.getAll(),s.forEach((function(s){if(d===s.get("trackingId")){o=!0;const c=s.get("name");i(c+".send","event",{eventCategory:t,eventAction:e,eventLabel:a,eventValue:n,nonInteraction:r})}})),!0!==o&&l(!0,a,e,t,n,r)):l(!0,a,e,t,n,r):0===d.length&&u.length>0&&("function"==typeof i?p(i,u,"rgParentTracker",e,a,t,n,r):c(!0,a,e,t,n,r))}},function(){if(e.settingsSaveButton.on("click",r((function(){if(!e.requestSent){e.requestSent=!0;let r=0,o=0,i="low";n.each(e.settingsPerMonth,(function(e,t){n(t).is(":checked")&&(i=n(t).val())}));const s=n(e.settingsMerchantID).val(),c=n(e.settingsMerchantKey).val(),l=e.settingsGAUserID.val();e.rgGAUserStatus.is(":checked")&&(r=e.rgGAUserStatus.val()),e.rgGALaterPayStatus.is(":checked")&&(o=e.rgGALaterPayStatus.val());const p={action:"rg_update_settings",average_post_publish_count:i,merchant_id:s,merchant_key:c,rg_personal_ga_ua_id:l,rg_ga_personal_enabled_status:r,rg_ga_enabled_status:o,security:revenueGeneratorGlobalOptions.rg_global_config_nonce};t(),a(p),e.requestSent=!1,e.somethingChanged=!1}}),500)),e.settingsPerMonth.on("click",(function(){e.settingsPerMonth.removeAttr("checked"),n(this).prop("checked",!0)})),e.everyInput.on("change",(function(){e.somethingChanged=!0})),n(window).on("beforeunload",(function(t){if(e.somethingChanged)return t.preventDefault(),!1})),e.rgLayoutWrapper.on("click",(function(){e.helpGAModal&&e.helpGAModal.length>0&&(n(e.helpGAModal).remove(),e.body.removeClass("modal-blur"),n(e.rgGAUserRow).css("background-color","inherit"),n(e.rgGALaterpayRow).css("background-color","inherit"),e.body.find("input").removeClass("input-blur"))})),e.body.on("click",e.helpGAButton,(function(){const t=n(this).attr("data-info-for"),a=e.settingsWrapper.find(e.helpGAModal);if(a.length)e.body.removeClass("modal-blur"),e.body.find("input").removeClass("input-blur"),a.remove();else{const a=wp.template("revgen-info-"+t);e.settingsWrapper.append(a),e.body.addClass("modal-blur"),e.body.find("input").addClass("input-blur"),"user"===t?(n(e.rgGAUserRow).find("input").removeClass("input-blur"),n(e.rgGALaterpayRow).removeAttr("style"),n(e.rgGAUserRow).css("background-color","#fff")):(n(e.rgGALaterpayRow).find("input").removeClass("input-blur"),n(e.rgGAUserRow).removeAttr("style"),n(e.rgGALaterpayRow).css("background-color","#fff"))}})),e.body.on("click",e.settingsModalClose,(function(){n(e.helpGAModal).remove(),e.body.removeClass("modal-blur"),n(e.rgGAUserRow).css("background-color","inherit"),n(e.rgGALaterpayRow).css("background-color","inherit"),e.body.find("input").removeClass("input-blur")})),n(".rev-gen__select2",e.rgDashboard).select2({width:"auto",dropdownAutoWidth:!0,dropdownCssClass:":all:",minimumResultsForSearch:-1}),n(e.rgDashboard).length>0){const t=n(e.rgDashboard).data("current"),a="LP RevGen";rgGlobal.sendLPGAEvent("View Dashboard",a,t,0,!0)}}()}()})),function(e){e((function(){!function(){const t={body:e("body"),welcomeScreenWrapper:e(".rev-gen-welcome"),isContribution:e("#rg_Contribution"),isPaywall:e("#rg_Paywall"),laterpayTrackingStatus:e("#welcome-screen-tracking"),snackBar:e("#rg_js_SnackBar")},a=function(e,t){const a={action:"rg_update_global_config",config_key:"is_welcome_done",config_value:e,rg_ga_enabled_status:t,security:revenueGeneratorGlobalOptions.rg_global_config_nonce};n(revenueGeneratorGlobalOptions.ajaxUrl,a)},n=function(a,n){e.ajax({url:a,method:"POST",data:n,dataType:"json"}).done((function(e){t.snackBar.showSnackbar(e.msg,500),t.welcomeScreenWrapper.fadeOut(500,(function(){window.location.reload()}))}))};t.isContribution.on("click",(function(){let e=0;t.laterpayTrackingStatus.is(":checked")&&(e=1),a("contribution",e),rgGlobal.sendLPGAEvent("Welcome Landing Page","LP RevGen","Contributions",0,!0)})),t.isPaywall.on("click",(function(){let e=0;t.laterpayTrackingStatus.is(":checked")&&(e=1),a("paywall",e),rgGlobal.sendLPGAEvent("Welcome Landing Page","LP RevGen","Paywall",0,!0)})),t.laterpayTrackingStatus.on("click",(function(){"checked"===e(this).attr("checked")?e(this).attr("checked","checked"):e(this).removeAttr("checked")}))}()}))}(jQuery);var o=a(0);class i{constructor(e){this.options={id:"",templateData:{},onConfirm:()=>{},onCancel:()=>{},autoShow:!0,keepOpen:!1,closeOutside:!1,...e},this.init()}init(){this.options.autoShow&&this.show()}show(){if(!this.options.id)return;const e=document.querySelector("body"),t=wp.template(this.options.id),a=this.options.templateData?t(this.options.templateData):t();e.insertAdjacentHTML("beforeend",a),this.el=document.getElementById(this.options.id),this.bindEvents()}hide(){document.querySelector(".rev-gen-modal-overlay").remove(),this.el.remove()}bindEvents(){this.el.querySelector("#rg_js_modal_confirm")&&this.el.querySelector("#rg_js_modal_confirm").addEventListener("click",this.onConfirm.bind(this)),this.el.querySelector("#rg_js_modal_cancel")&&this.el.querySelector("#rg_js_modal_cancel").addEventListener("click",this.onCancel.bind(this)),this.el.querySelector("#rg_js_modal_close")&&this.el.querySelector("#rg_js_modal_close").addEventListener("click",this.hide.bind(this)),this.options.closeOutside&&(document.addEventListener("click",this.hide.bind(this),{once:!0}),this.el.addEventListener("click",e=>{e.stopPropagation()})),this.el.addEventListener("rev-gen-modal-close",this.hide.bind(this))}onConfirm(e){this.options.onConfirm(e,this.el),this.options.keepOpen||this.hide()}onCancel(e){this.options.onCancel(e,this.el),this.options.keepOpen||this.hide()}}!function(e){e((function(){!function(){const t={body:e("body"),requestSent:!1,isPublish:!1,previewWrapper:e(".rev-gen-preview-main, .rev-gen-contribution-main"),layoutWrapper:e(".rev-gen-layout-wrapper"),laterpayLoader:e(".laterpay-loader-wrapper"),noResultsWrapper:".rev-gen-preview-main-no-result",contributionBox:e(".rev-gen-contribution-main--box"),searchContentWrapper:e(".rev-gen-preview-main--search"),searchContent:e("#rg_js_searchContent"),currentPaywall:e("#rg_currentPaywall"),searchResultWrapper:e(".rev-gen-preview-main--search-results"),searchResultItem:".rev-gen-preview-main--search-results-item",postPreviewWrapper:e("#rg_js_postPreviewWrapper"),postTitle:".rev-gen-preview-main--post--title",postExcerpt:e("#rg_js_postPreviewExcerpt"),postContent:e("#rg_js_postPreviewContent"),purchaseOverlay:e("#rg_js_purchaseOverlay"),purchaseOverlayRemove:".rg-purchase-overlay-remove",purchaseOptionItems:".rg-purchase-overlay-purchase-options",purchaseOptionItem:".rg-purchase-overlay-purchase-options-item",purchaseOptionItemInfo:".rg-purchase-overlay-purchase-options-item-info",purchaseOptionItemTitle:".rg-purchase-overlay-purchase-options-item-info-title",purchaseOptionItemDesc:".rg-purchase-overlay-purchase-options-item-info-description",purchaseItemPriceIcon:".rg-purchase-overlay-purchase-options-item-price-icon",purchaseOptionItemPrice:".rg-purchase-overlay-purchase-options-item-price-span",purchaseOptionPriceSymbol:".rg-purchase-overlay-purchase-options-item-price-symbol",purchaseOptionAction:".rg-purchase-overlay-purchase-options-item-actions",optionArea:".rg-purchase-overlay-option-area",addOptionArea:".rg-purchase-overlay-option-area-add-option",previewSecondItem:".rg-purchase-overlay-purchase-options .option-item-second",editOption:".rg-purchase-overlay-option-edit",optionRemove:".rg-purchase-overlay-option-remove",purchaseOptionType:"#rg_js_purchaseOptionType",optionManager:".rg-purchase-overlay-option-manager",individualPricingWrapper:".rg-purchase-overlay-option-manager-pricing",individualPricingSelection:".rg-purchase-overlay-option-pricing-selection",purchaseRevenueWrapper:".rg-purchase-overlay-option-manager-revenue",purchaseRevenueSelection:".rg-purchase-overlay-option-revenue-selection",durationWrapper:".rg-purchase-overlay-option-manager-duration",periodCountSelection:".rg-purchase-overlay-option-manager-duration-count",periodSelection:".rg-purchase-overlay-option-manager-duration-period",entitySelection:".rg-purchase-overlay-option-manager-entity",addPaywall:"#rj_js_addNewPaywall",gotoDashboard:"#rg_js_gotoDashboard",actionsWrapper:e(".rev-gen-preview-main--paywall-actions"),actionButtons:e(".rev-gen-preview-main--paywall-actions-update"),activatePaywall:e("#rg_js_activatePaywall"),savePaywall:e("#rg_js_savePaywall"),searchPaywallContent:e("#rg_js_searchPaywallContent"),searchPost:e("#rg_js_searchPost"),applyToSelect:e(".rev-gen-preview-main--paywall-actions-apply select"),select2Multiple:e("#rg_js_searchPaywallContent, #rg_js_searchPost"),searchPaywallWrapper:e(".rev-gen-preview-main--paywall-actions-search"),searchPostWrapper:e(".rev-gen-preview-main--paywall-actions-search-post"),paywallName:e(".rev-gen-preview-main-paywall-name"),paywallNameData:e(".rev-gen-preview-main-paywall-name").text().trim(),paywallTitle:".rg-purchase-overlay-title",paywallDesc:".rg-purchase-overlay-description",paywallAppliesTo:".rev-gen-preview-main-paywall-applies-to",currencyRadio:"[name=currency]",purchaseOptionInfoButton:".rg-purchase-overlay-option-info",purchaseOptionInfoModal:".rev-gen-preview-main-info-modal",accountActionId:"#rev-gen-merchant-id",accountActionKey:"#rev-gen-api-key",activateSignup:"#rg_js_activateSignup",warningSignup:"#rg_js_warningSignup",viewPost:"#rg_js_viewPost",viewDashboard:"#rg_js_viewDashboard",exitTour:".rev-gen-exit-tour",snackBar:e("#rg_js_SnackBar"),emailSupportButton:e(".rev-gen-email-support")},a=function(e,a,n){const r=e.closest(t.purchaseOptionItem);w(),setTimeout((function(){const e=parseInt(r.find(t.periodCountSelection).val()),s=r.find(t.periodSelection).val(),c=r.attr("data-purchase-type");let l,p;switch(l=e+" ",p=e+" ",s){case"h":l+=Object(o.a)("Hour","revenue-generator"),p+=Object(o.a)("Hours","revenue-generator");break;case"d":l+=Object(o.a)("Day","revenue-generator"),p+=Object(o.a)("Days","revenue-generator");break;case"w":l+=Object(o.a)("Week","revenue-generator"),p+=Object(o.a)("Weeks","revenue-generator");break;case"m":l+=Object(o.a)("Month","revenue-generator"),p+=Object(o.a)("Months","revenue-generator");break;case"y":l+=Object(o.a)("Year","revenue-generator"),p+=Object(o.a)("Years","revenue-generator")}let d=Object(o.b)(Object(o.a)("Enjoy unlimited access to all our content for %1$s"),l);switch(e&&e>1&&(d=Object(o.b)(Object(o.a)("Enjoy unlimited access to all our content for %1$s"),p)),c){case"subscription":l+=" "+Object(o.a)("Subscription","revenue-generator");break;case"timepass":l+=" "+Object(o.a)("Pass","revenue-generator")}a&&"1"===a||n&&"1"===n?new i({id:"rg-modal-dynamic-title-desc",onConfirm:async()=>{r.attr("data-custom-desc",""),r.attr("data-custom-title",""),r.find(t.purchaseOptionItemTitle).text(l),r.find(t.purchaseOptionItemDesc).text(d)},onCancel:()=>{}}):(r.find(t.purchaseOptionItemTitle).text(l),r.find(t.purchaseOptionItemDesc).text(d)),_()}),1e3)},n=function(){const e=t.body.find(t.accountActionId).val().trim(),a=t.body.find(t.accountActionKey).val().trim();return!(!e||!a)},s=function(t,a=0,n="",r=[]){const o={action:"rg_post_permalink",preview_post_id:t,category_id:a,applies_to:n,specific_posts_ids:r,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:o,dataType:"json"}).done((function(e){e.redirect_to&&window.open(e.redirect_to,"_blank")}))},c=function(){if(!t.requestSent){t.requestSent=!0,w();const a=e(t.purchaseOptionItems).attr("data-paywall-id"),n={action:"rg_activate_paywall",paywall_id:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:n,dataType:"json"}).done((function(){t.requestSent=!1,_();const n=t.postPreviewWrapper.attr("data-preview-id"),r=t.searchPaywallContent.text().trim(),o=t.paywallName.text().trim(),c=e(t.paywallAppliesTo).val(),l=t.searchPaywallContent.val(),p=t.searchPost.val();new i({id:"rg-modal-paywall-activation",templateData:{paywallID:a,paywallName:o,appliedTo:c,categoryName:r,postTitle:e(t.postTitle).text().trim()},onConfirm:async()=>{n&&s(n,l,c,p)},onCancel:async e=>{window.location.href=e.target.dataset.dashboard_url}})}))}},l=function(){new i({id:"rg-modal-account-activation",keepOpen:!0,templateData:{},onConfirm:async()=>{p()},onCancel:async(e,t)=>{if(revenueGeneratorGlobalOptions.globalOptions.merchant_region.length){const e=revenueGeneratorGlobalOptions.globalOptions.merchant_region,a=revenueGeneratorGlobalOptions.signupURL;"US"===e?window.open(a.US,"_blank"):window.open(a.EU,"_blank");const n=new Event("rev-gen-modal-close");t.dispatchEvent(n),p()}rgGlobal.sendLPGAEvent("Connect Account","LP RevGen Account","Signup",0,!0)}})},p=function(){new i({id:"rg-modal-connect-account",keepOpen:!0,templateData:{},onConfirm:async(t,a)=>{const n=new Event("rev-gen-modal-close"),r=e(a),o=e("#rev-gen-merchant-id",r).val(),i=e("#rev-gen-api-key",r).val(),s=e("#rg_js_restartVerification",r);r.addClass("loading");const c=d(o,i);s.on("click",(function(){a.dispatchEvent(n),p()})),c?(r.removeClass("loading"),a.dispatchEvent(n)):r.removeClass("loading").addClass("modal-error")}})},d=function(a,n){if(!t.requestSent){t.requestSent=!0;const r={action:"rg_verify_account_credentials",merchant_id:a,merchant_key:n,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};let o="",i=!1;return e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",async:!1,data:r,dataType:"json"}).done((function(a){t.requestSent=!1;const n=e(t.purchaseOptionItems);if(revenueGeneratorGlobalOptions.merchant_id=a.merchant_id,!0===a.success){n.attr("data-paywall-id").length?c():(t.isPublish=!0,t.savePaywall.trigger("click"),w(),setTimeout((function(){revenueGeneratorGlobalOptions.globalOptions.is_merchant_verified="1",c(),_()}),2e3)),o="Success",i=!0}else t.isPublish=!0,t.savePaywall.trigger("click"),o="Failure - "+a.msg,i=!1;rgGlobal.sendLPGAEvent("Connect Account","LP RevGen Account",o,0,!0)})),i}},u=function(e){tippy(e,{arrow:tippy.roundArrow})},h=function(){return new Shepherd.Tour({defaultStepOptions:{classes:"rev-gen-tutorial-card",scrollTo:!0,scrollToHandler:t=>{e("html, body").animate({scrollTop:e(t).offset().top-e(window).height()/2-e(t).height()},1e3)}}})},g=function(t){const a={text:Object(o.a)("Skip Tour","revenue-generator"),action:t.complete,classes:"shepherd-content-skip-tour"},n={text:Object(o.a)("Next >","revenue-generator"),action:t.next,classes:"shepherd-content-next-tour-element"},r="LP RevGen Paywall Tutorial",i=t.addStep({id:"rg-main-search-input",text:Object(o.a)("Search for the page or post you'd like to preview with Revenue Generator here.","revenue-generator"),attachTo:{element:".rev-gen-preview-main--search",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-top fade-in",buttons:[a,n],when:{hide(){rgGlobal.sendLPGAEvent("1 - Article Search",r,"Continue",0,!0)}}}).on("before-hide",()=>{const e=i.options.classes;i.options.classes=e.replace("fade-in","fade-out"),i.updateStepOptions(i.options)}).on("hide",()=>{e(i.el).removeAttr("hidden"),setTimeout((function(){e(i.el).attr("hidden","")}),700)}),s=t.addStep({id:"rg-purchase-overlay-header",text:Object(o.a)("Click to Edit","revenue-generator"),attachTo:{element:".rg-purchase-overlay-title",on:"bottom"},arrow:!0,classes:"rev-gen-tutorial-title fade-in",buttons:[n],when:{hide(){rgGlobal.sendLPGAEvent("2 - Name Paywall",r,"Continue",0,!0)}}}).on("before-hide",()=>{const e=s.options.classes;s.options.classes=e.replace("fade-in","fade-out"),s.updateStepOptions(s.options)}).on("hide",()=>{e(s.el).removeAttr("hidden"),setTimeout((function(){e(s.el).attr("hidden","")}),700)}),c=t.addStep({id:"rg-purchase-option-item",text:Object(o.a)("Hover over each element to see the available options.","revenue-generator"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[n],when:{hide(){rgGlobal.sendLPGAEvent("3 - Element Hover",r,"Continue",0,!0)}}}).on("before-hide",()=>{const e=c.options.classes;c.options.classes=e.replace("fade-in","fade-out"),c.updateStepOptions(c.options)}).on("hide",()=>{e(c.el).removeAttr("hidden"),setTimeout((function(){e(c.el).attr("hidden","")}),700)}),l=t.addStep({id:"rg-purchase-option-item-edit",text:Object(o.a)("Click on the ‘more options’ icon to set the product type (single item purchase, time pass, or subscription).","revenue-generator"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second .rg-purchase-overlay-option-edit",on:"left"},arrow:!0,buttons:[n],classes:"fade-in",when:{hide(){rgGlobal.sendLPGAEvent("4 - More Options",r,"Continue",0,!0)}}}).on("before-hide",()=>{const e=l.options.classes;l.options.classes=e.replace("fade-in","fade-out"),l.updateStepOptions(l.options)}).on("hide",()=>{e(l.el).removeAttr("hidden"),setTimeout((function(){e(l.el).attr("hidden","")}),700)}),p=t.addStep({id:"rg-purchase-option-item-title",text:Object(o.a)("Click on any text element to edit it.","revenue-generator"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second .rg-purchase-overlay-purchase-options-item-info .rg-purchase-overlay-purchase-options-item-info-title",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[n],when:{hide(){rgGlobal.sendLPGAEvent("5 - Text Edit",r,"Continue",0,!0)}}}).on("before-hide",()=>{const e=p.options.classes;p.options.classes=e.replace("fade-in","fade-out"),p.updateStepOptions(p.options)}).on("hide",()=>{e(p.el).removeAttr("hidden"),setTimeout((function(){e(p.el).attr("hidden","")}),700)}),d=t.addStep({id:"rg-purchase-option-item-price",text:Object(o.b)(Object(o.a)("These are our recommended prices. %1$s%1$sClick to edit; prices lower than 5.00 will default to %2$spay later%3$s.","revenue-generator"),"<br/>",'<a class="info-link" href="https://www.laterpay.net/academy/getting-started-with-laterpay-the-difference-between-pay-now-pay-later" target="_blank" rel="noopener noreferrer">',"</a>"),attachTo:{element:".rg-purchase-overlay-purchase-options .option-item-second .rg-purchase-overlay-purchase-options-item-price",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[n],when:{hide(){rgGlobal.sendLPGAEvent("6 - Pricing",r,"Continue",0,!0)}}}).on("before-hide",()=>{const e=d.options.classes;d.options.classes=e.replace("fade-in","fade-out"),d.updateStepOptions(d.options)}).on("hide",()=>{e(d.el).removeAttr("hidden"),setTimeout((function(){e(d.el).attr("hidden","")}),700)}),u=t.addStep({id:"rg-purchase-option-item-add",text:Object(o.a)("Hover below the paywall to get the option to add another purchase button.","revenue-generator"),attachTo:{element:".rg-purchase-overlay-option-area-add-option",on:"top"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[n],when:{hide(){rgGlobal.sendLPGAEvent("7 - Add Purchase Option",r,"Continue",0,!0)}}}).on("before-hide",()=>{const e=u.options.classes;u.options.classes=e.replace("fade-in","fade-out"),u.updateStepOptions(u.options)}).on("hide",()=>{e(u.el).removeAttr("hidden"),setTimeout((function(){e(u.el).attr("hidden","")}),700)}),h=t.addStep({id:"rg-purchase-option-paywall-name",text:Object(o.a)("Click here to change the name of your paywall.","revenue-generator"),attachTo:{element:".rev-gen-preview-main-paywall-name",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[n],when:{hide(){rgGlobal.sendLPGAEvent("8 - Name Paywall",r,"Continue",0,!0)}}}).on("before-hide",()=>{const e=h.options.classes;h.options.classes=e.replace("fade-in","fade-out"),h.updateStepOptions(h.options)}).on("hide",()=>{e(h.el).removeAttr("hidden"),setTimeout((function(){e(h.el).attr("hidden","")}),700)}),g=t.addStep({id:"rg-purchase-option-paywall-actions-search",text:Object(o.a)("Select the content that should display this paywall.","revenue-generator"),attachTo:{element:".rev-gen-preview-main--paywall-actions-search",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[n],when:{hide(){rgGlobal.sendLPGAEvent("9 - Select Content",r,"Continue",0,!0)}}}).on("before-hide",()=>{const e=g.options.classes;g.options.classes=e.replace("fade-in","fade-out"),g.updateStepOptions(g.options)}).on("hide",()=>{e(g.el).removeAttr("hidden"),setTimeout((function(){e(g.el).attr("hidden","")}),700)}),f=t.addStep({id:"rg-purchase-option-paywall-publish",text:Object(o.a)("When you’re ready to activate your paywall, connect your Laterpay account.","revenue-generator"),attachTo:{element:"#rg_js_activatePaywall",on:"bottom"},arrow:!0,classes:"shepherd-content-add-space-bottom fade-in",buttons:[{text:Object(o.a)("Complete","revenue-generator"),action:t.next,classes:"shepherd-content-complete-tour-element"}],when:{hide(){rgGlobal.sendLPGAEvent("10 - Publish",r,"Complete",0,!0)}}}).on("before-hide",()=>{const e=f.options.classes;f.options.classes=e.replace("fade-in","fade-out"),f.updateStepOptions(f.options)}).on("hide",()=>{e(f.el).removeAttr("hidden"),setTimeout((function(){e(f.el).attr("hidden","")}),700)})},f=function(a){e(t.exitTour).css({visibility:"visible","pointer-events":"all",cursor:"pointer"}),t.body.addClass("modal-blur"),t.layoutWrapper.css({"pointer-events":"none"}),e(t.purchaseOptionItem).css({"background-color":"darkgray"}),e(t.purchaseOptionItemInfo).css({"border-right":"1px solid #928d8d"}),t.emailSupportButton.hide();const n=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"],r=function(e){if(n.includes(e.key))return e.preventDefault(),!1};e(document).keydown(r),Shepherd.on("complete",(function(){t.body.removeClass("modal-blur"),t.layoutWrapper.css({"pointer-events":"unset"}),t.searchContentWrapper.css({"background-color":"#fff"}),e(t.purchaseOptionItem).css({"background-color":"#fff"}),e(t.purchaseOptionItemInfo).css({"border-right":"1px solid #e3e4e6"}),e(t.exitTour).remove(),t.emailSupportButton.show(),e(document).unbind("keydown",r);let a="",n="Exit Tour";switch(Shepherd.activeTour.getCurrentStep().id){case"rg-main-search-input":a="1 - Article Search";break;case"rg-purchase-overlay-header":a="2 - Name Paywall";break;case"rg-purchase-option-item":a="3 - Element Hover";break;case"rg-purchase-option-item-edit":a="4 - More Options";break;case"rg-purchase-option-item-title":a="5 - Text Edit";break;case"rg-purchase-option-item-price":a="6 - Pricing";break;case"rg-purchase-option-item-add":a="7 - Add Purchase Option";break;case"rg-purchase-option-paywall-name":a="8 - Name Paywall";break;case"rg-purchase-option-paywall-actions-search":a="9 - Select Content";break;case"rg-purchase-option-paywall-publish":a="10 - Publish",n="Complete"}rgGlobal.sendLPGAEvent(a,"LP RevGen Paywall Tutorial",n,0,!0),setTimeout((function(){y()}),500)})),a.start()},y=function(){const t={action:"rg_complete_tour",config_key:"paywall_tutorial_done",config_value:1,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:t,dataType:"json"}).done((function(e){e.success&&window.location.reload()}))},v=function(a){if(!t.requestSent){t.requestSent=!0;const n={action:"rg_clear_category_meta",rg_category_id:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:n,dataType:"json"}).done((function(){t.requestSent=!1}))}},m=function(a){if(!t.requestSent){t.requestSent=!0;const n={action:"rg_select_preview_content",post_preview_id:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:n,dataType:"json"}).done((function(e){t.requestSent=!1,e.redirect_to&&(window.location.href=e.redirect_to)}))}},b=function(a){if(a.length&&!t.requestSent){t.requestSent=!0;const n={action:"rg_search_preview_content",search_term:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:n,dataType:"json"}).done((function(n){if(t.requestSent=!1,!0===n.success){t.searchContentWrapper.addClass("searching"),t.searchResultWrapper.empty();n.preview_posts.forEach((function(n){const r="post"===n.type?"dashicons-admin-post":"dashicons-admin-page",o=n.title,i=new RegExp(a,"i"),s=o.replace(i,`<b>${a}</b>`),c=e("<span/>",{"data-id":n.id,class:"rev-gen-preview-main--search-results-item dashicons-before"}).append(s);c.addClass(r),t.searchResultWrapper.append(c),t.searchResultWrapper.css({display:"flex"})}));const r="LP RevGen Paywall Preview",o="";rgGlobal.sendLPGAEvent("Article Search",r,o,0,!0)}else t.snackBar.showSnackbar(n.msg,1500)}))}},w=function(){t.laterpayLoader.css({display:"flex"})},_=function(){t.laterpayLoader.hide()},O=function(a,n,r=!0){const o={action:"rg_remove_purchase_option",type:a,id:n,paywall_id:e(t.purchaseOptionItems).attr("data-paywall-id"),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:o,dataType:"json"}).done((function(e){!0===r&&t.snackBar.showSnackbar(e.msg,1500)}))},k=function(){const a=e(t.purchaseOptionItems);if(a.length){a.children(t.purchaseOptionItem).each((function(){const a=(100*e(this).find(t.purchaseOptionItemPrice).text().trim()).toFixed(0);e(this).attr("data-lpc-pricing",a)}));const n=a.find("[data-purchase-type='individual']"),r=a.find("[data-purchase-type='timepass']"),o=a.find("[data-purchase-type='subscription']");n.length&&a.prepend(n),r.length&&(r.sort((function(t,a){return+e(t).attr("data-lpc-pricing")-+e(a).attr("data-lpc-pricing")})),a.find("[data-purchase-type='timepass']").remove(),n.length?a.find(n).after(r):a.prepend(r)),o.length&&(o.sort((function(t,a){return+e(t).data("lpc-pricing")-+e(a).data("lpc-pricing")})),a.find("[data-purchase-type='subscription']").remove(),a.append(o)),a.children(t.purchaseOptionItem).each((function(t){const a=t+1;e(this).attr("data-order",a)}))}},P=function(a,n){const r=e(n).find(".rg-purchase-overlay-option-manager"),o=r.find(t.purchaseRevenueWrapper),i=r.find(t.individualPricingWrapper),s=e(n).attr("data-purchase-type");e(n).attr("data-pricing-type","static"),i.find(t.individualPricingSelection).prop("checked",!1),a>=revenueGeneratorGlobalOptions.currency.sis_only_limit?(e(n).find(t.purchaseOptionItemPrice).attr("data-pay-model","sis"),o.find(t.purchaseRevenueSelection).prop("checked",!1),"subscription"!==s&&(e(n).trigger("mouseenter"),e(n).find(t.editOption).trigger("click"))):(a<=revenueGeneratorGlobalOptions.currency.ppu_min||a>revenueGeneratorGlobalOptions.currency.ppu_min)&&a<revenueGeneratorGlobalOptions.currency.sis_min&&(e(n).find(t.purchaseOptionItemPrice).attr("data-pay-model","ppu"),o.find(t.purchaseRevenueSelection).prop("checked",!0),"subscription"!==s&&(e(n).trigger("mouseenter"),e(n).find(t.editOption).trigger("click")))},x=function(a,n){const r=e(a).find(t.purchaseOptionItemPrice),i=parseFloat(r.text().trim()),s=e(a).attr("data-purchase-type"),c=revenueGeneratorGlobalOptions.currency;let l=G(i);if(!1===n&&i<=parseFloat(c.ppu_only_limit))if(l=G(c.sis_min,"subscription"===s),t.snackBar.showSnackbar(Object(o.a)("Pay Now is only available for prices set to $1.99 or higher.","revenue-generator"),2500),"individual"===s){e(t.purchaseItemPriceIcon).css({display:"none"}),r.text(l)}else r.empty().text(l);else if(!0===n&&i>parseFloat(c.ppu_max))if(l=G(c.ppu_max,"subscription"===s),t.snackBar.showSnackbar(Object(o.a)("Pay Later is only available for prices set less than $5.","revenue-generator"),2500),"individual"===s){e(t.purchaseItemPriceIcon).css({display:"none"}),r.text(l)}else r.empty().text(l)},G=function(e,t){return"number"!=typeof e&&(e=e.replace(/[^0-9\,\.]/g,""),e=parseFloat(e.replace(",",".")).toFixed(2)),isNaN(e)&&(e=0),e=Math.abs(e),t?e<revenueGeneratorGlobalOptions.currency.sis_min?e=revenueGeneratorGlobalOptions.currency.sis_min:e>revenueGeneratorGlobalOptions.currency.sis_max&&(e=revenueGeneratorGlobalOptions.currency.sis_max):(e>revenueGeneratorGlobalOptions.currency.sis_max&&(e=revenueGeneratorGlobalOptions.currency.sis_max),e>0&&e<revenueGeneratorGlobalOptions.currency.ppu_min&&(e=revenueGeneratorGlobalOptions.currency.ppu_min)),e=e.toFixed(2),-1!==revenueGeneratorGlobalOptions.locale.indexOf("de_DE")&&(e=e.replace(".",",")),e},S=function(){new i({id:"rg-modal-choose-currency",onConfirm:async(a,n)=>{const r=new Event("rev-gen-modal-close"),o={action:"rg_update_currency_selection",config_key:"merchant_currency",config_value:e("input:radio[name=currency]:checked").val(),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:o,dataType:"json"}).done((function(a){t.snackBar.showSnackbar(a.msg,1500),n.dispatchEvent(r);e(t.purchaseOptionItems).children(t.purchaseOptionItem).each((function(){const a=e(this).find(t.purchaseOptionPriceSymbol),n="USD"===o.config_value?"$":"€";a.empty().text(n)}))}))}})},C=function(a,n){e.ajax({url:a,method:"POST",data:n,dataType:"json"}).done((function(a){_(),t.snackBar.showSnackbar(a.msg,1500);e(t.purchaseOptionItems).find(t.purchaseOptionItem).length<5&&e(t.optionArea).show();let r="",o="";o=t.isPublish?"Publish":"Save";const i="LP RevGen Paywall Publish",s=n.paywall.name;let c=revenueGeneratorGlobalOptions.merchant_id;!c&&e(t.accountActionId).val()&&(c=e(t.accountActionId).val());const l=n.paywall.applies,p=n.post_id,d=n.subscriptions.length,u=n.time_passes.length,h=parseInt(d)+parseInt(u);r=c+" - "+a.paywall_id+" - "+s+" - "+l+" - "+p+" - "+h,rgGlobal.sendLPGAEvent(o,i,r,0,!0);const g=e(t.purchaseOptionItems);o="Paywall Details",g.attr("data-paywall-id",a.paywall_id);const f=g.find("[data-purchase-type='individual']");if(f.length){f.attr("data-paywall-id",a.paywall_id);let e=n.individual.type;if("dynamic"!==e){const t=n.individual.revenue;"ppu"===t?e="Pay Later":"sis"===t&&(e="Pay now")}const t=n.individual.price;r=revenueGeneratorGlobalOptions.merchant_id+" - "+a.paywall_id+" - Single Article - "+e+" - "+t,rgGlobal.sendLPGAEvent(o,i,r,0,!0)}const y=g.find("[data-purchase-type='timepass']");y.length&&y.each((function(t){const s=e(this).attr("data-uid");e(this).attr("data-tlp-id",a.time_passes[s]);const c=n.time_passes[t].revenue;let l="";"ppu"===c?l="Pay Later":"sis"===c&&(l="Pay now");const p=n.time_passes[t].price,d=n.time_passes[t].period+n.time_passes[t].duration;r=revenueGeneratorGlobalOptions.merchant_id+" - "+a.paywall_id+" - Time Pass - "+l+" - "+d+" - "+p,rgGlobal.sendLPGAEvent(o,i,r,0,!0)}));const v=g.find("[data-purchase-type='subscription']");v.length&&v.each((function(t){const s=e(this).attr("data-uid");e(this).attr("data-sub-id",a.subscriptions[s]);const c=n.subscriptions[t].revenue;let l="";"ppu"===c?l="Pay Later":"sis"===c&&(l="Pay now");const p=n.subscriptions[t].price,d=n.subscriptions[t].period+n.subscriptions[t].duration;r=revenueGeneratorGlobalOptions.merchant_id+" - "+a.paywall_id+" - Subscription - "+l+" - "+d+" - "+p,rgGlobal.sendLPGAEvent(o,i,r,0,!0)})),a.redirect_to&&!1===t.isPublish&&(window.location.href=a.redirect_to)}))},j=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},T=function(t,a){const n=[];let r=24;"y"===t?r=1:"m"===t&&(r=12);for(let t=1;t<=r;t++){const a=e("<option/>",{value:t});a.text(t),n.push(a)}e(a).find("option").remove().end().append(n)},A=function(){!function(){if(!revenueGeneratorGlobalOptions.welcome.isPaywallWelcomeDone){const e="Paywall Landing Page",a="LP RevGen Paywall Tutorial";new i({id:"rg-modal-publishing-frequency",onConfirm:()=>{t("low"),rgGlobal.sendLPGAEvent(e,a,"Fewer than 10",0,!0)},onCancel:()=>{t("high"),rgGlobal.sendLPGAEvent(e,a,"10+",0,!0)}})}const t=function(t){const a={action:"rg_update_global_config",config_key:"average_post_publish_count",config_value:t,security:revenueGeneratorGlobalOptions.rg_global_config_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"})}}(),e(document).ready((function(){t.postPreviewWrapper.fadeIn("slow"),t.applyToSelect.select2({width:"auto",dropdownAutoWidth:!0,dropdownCssClass:":all:"}),e(t.noResultsWrapper).length&&(t.layoutWrapper.css({"background-color":"rgba(0, 0, 0, 0.5)","min-height":"800px"}),t.searchContentWrapper.css({"background-color":"#fff"}),tippy(document.querySelector(".rev-gen-preview-main--search"),{arrow:tippy.roundArrow}).show()),e(t.paywallAppliesTo).trigger("change");const a=e(t.purchaseOptionItems);if(a.length){const e=a.find("[data-purchase-type='individual']");"dynamic"===e.attr("data-pricing-type")&&(e.find(t.purchaseItemPriceIcon).show(),u(".rg-purchase-overlay-purchase-options-item-price-icon"))}if(revenueGeneratorGlobalOptions.globalOptions.average_post_publish_count.length&&0===parseInt(revenueGeneratorGlobalOptions.globalOptions.paywall_tutorial_done)&&a&&a.length>0){const e=h();g(e),f(e)}const n=t.select2Multiple.val();if(n&&n.length>0){const t=e(".select2-selection--multiple .select2-search.select2-search--inline");t.trigger("click"),t.trigger("click")}})),t.body.on("click",t.purchaseOptionItemTitle,(function(){this.addEventListener("input",(function(){e(this).closest(t.purchaseOptionItem).attr("data-custom-title","1")}))})),t.body.on("click",t.purchaseOptionItemDesc,(function(){this.addEventListener("input",(function(){e(this).closest(t.purchaseOptionItem).attr("data-custom-desc","1")}))})),t.body.on("click",".shepherd-button",(function(){const a=Shepherd.activeTour.getCurrentStep().id;e(t.purchaseOptionItem).css({"background-color":"darkgray"}),e(t.purchaseOptionItemInfo).css({"border-right":"1px solid #928d8d"}),"rg-purchase-option-item"===a?(e(t.previewSecondItem).trigger("mouseenter"),t.searchContentWrapper.css({"background-color":"#a9a9a9"}),e(t.previewSecondItem).css({"background-color":"#fff"}),e(t.previewSecondItem).find(t.purchaseOptionItemInfo).css({"border-right":"1px solid #e3e4e6"})):"rg-purchase-option-item-price"===a?e(t.previewSecondItem).trigger("mouseleave"):"rg-purchase-option-paywall-name"===a?(e(t.paywallAppliesTo).val("category"),e(t.paywallAppliesTo).trigger("change")):"rg-purchase-option-paywall-publish"===a&&t.activatePaywall.css("background-color","#000")})),t.body.on("click",t.exitTour,(function(){"undefined"!=typeof Shepherd&&void 0!==Shepherd.activeTour&&Shepherd.activeTour.complete()})),t.postPreviewWrapper.on("click",(function(){t.searchContentWrapper.removeClass("searching"),t.searchResultWrapper.hide(),t.searchContentWrapper.find("label").show();const a=t.searchContent.val().trim(),n=e(t.postTitle).text().trim();a!==n&&t.searchContent.val(n)})),t.body.on("click",t.searchResultItem,(function(){const t=e(this).attr("data-id");m(t)})),t.searchContent.on("focus",(function(){t.postPreviewWrapper.addClass("blury"),e("html, body").animate({scrollTop:0},"slow"),t.body.css({overflow:"hidden",height:"100%"})})),t.searchContent.on("click",(function(){if(!t.currentPaywall.val())return!1;new i({id:"rg-modal-search-paywall-warning",onConfirm:async()=>{t.searchContent.focus()}})})),t.searchContent.on("focusout",(function(){t.body.css({overflow:"auto",height:"auto"}),t.postPreviewWrapper.removeClass("blury")})),t.searchContent.on("input change",r((function(){t.searchContentWrapper.find("label").hide();const a=e(this).val().trim(),n=e(t.postTitle).text().trim();a.length&&a!==n&&b(a)}),500)),t.searchPaywallContent.select2({ajax:{url:revenueGeneratorGlobalOptions.ajaxUrl,dataType:"json",delay:500,type:"POST",data:e=>({term:e.term,action:"rg_search_term",security:revenueGeneratorGlobalOptions.rg_paywall_nonce}),processResults(t){const a=[];return t&&e.each(t.categories,(function(e){const n=t.categories[e];a.push({id:n.term_id,text:n.name})})),{results:a}},cache:!0},width:"auto",dropdownAutoWidth:!0,dropdownCssClass:":all:",placeholder:Object(o.a)("Search","revenue-generator"),language:{inputTooShort:()=>Object(o.a)("Please enter 1 or more characters.","revenue-generator"),noResults:()=>Object(o.a)("No results found.","revenue-generator")},minimumInputLength:1,closeOnSelect:!1}),t.searchPaywallContent.on("change",(function(){const a=e(this).val(),n=JSON.stringify(a);n&&v(n),n&&(t.postPreviewWrapper.attr("data-access-id",n),t.savePaywall.removeAttr("disabled"),t.activatePaywall.removeAttr("disabled"))})),t.searchPost.select2({ajax:{url:revenueGeneratorGlobalOptions.ajaxUrl,dataType:"json",delay:500,type:"POST",data:e=>({term:e.term,action:"rg_search_post",security:revenueGeneratorGlobalOptions.rg_paywall_nonce}),processResults(t){const a=[];return t&&e.each(t.posts,(function(e){const n=t.posts[e];a.push({id:n.ID,text:n.post_title})})),{results:a}},cache:!0},dropdownAutoWidth:!0,dropdownCssClass:":all:",placeholder:Object(o.a)("search","revenue-generator"),language:{inputTooShort:()=>Object(o.a)("Please enter 1 or more characters.","revenue-generator"),noResults:()=>Object(o.a)("No results found.","revenue-generator")},minimumInputLength:1,closeOnSelect:!1}),t.select2Multiple.on("select2:close",(function(){const t=e(this).siblings("span.select2").find(".select2-selection--multiple"),a=e(this).select2("data").length,n=t.find(".select2-selection__rendered .select2-search--inline input");n.attr("placeholder",a+" items selected"),n.css("width","100%")})),t.searchPost.on("change",(function(){const a=e(this).val(),n=JSON.stringify(a);a&&(t.searchPostWrapper.attr("data-access-id",n),t.savePaywall.removeAttr("disabled"),t.activatePaywall.removeAttr("disabled"))})),t.previewWrapper.on("click",(function(a){const n=e(a.target),r=n.parent(".rg-purchase-overlay-option-edit").length;if(!n.parents(".rg-purchase-overlay-option-manager").length&&!e(".rev-gen-modal").length&&!r){a.preventDefault();const n=t.body.find(".rg-purchase-overlay-option-manager");e.each(n,(function(t,a){"none"!==e(a).css("display")&&e(a).trigger("option-manager-close")}))}n.parents(".rg-purchase-overlay-option-manager").length||(e(".pricing-info-modal").length&&t.body.find("#pricing-info-modal").trigger("click"),e(".revenue-info-modal").length&&t.body.find("#revenue-info-modal").trigger("click"))})),t.body.on("mouseenter",t.purchaseOptionItem,(function(){t.purchaseOverlay.children(".rg-purchase-overlay-highlight").hide(),e(t.purchaseOverlayRemove).hide();const a=e(this).find(".rg-purchase-overlay-purchase-options-item-actions"),n=a.length,r=e(this).children(".rg-purchase-overlay-purchase-options-item-highlight");if(n)a.show(),e(r).show();else{const t=wp.template("revgen-purchase-overlay-actions")();e(r).show(),e(this).prepend(t)}})),t.body.on("mouseleave",t.purchaseOptionItem,(function(){e(this).children(".rg-purchase-overlay-purchase-options-item-highlight").hide(),t.body.find(".rg-purchase-overlay-option-manager:visible").length||e(this).find(".rg-purchase-overlay-purchase-options-item-actions").hide()})),t.body.on("click",t.editOption,(function(){const n=e(this),r=e(this).parents(".rg-purchase-overlay-purchase-options-item");let o=r.find(".rg-purchase-overlay-option-manager");const i=e(this).children(".rg-purchase-overlay-purchase-options-item-highlight"),s=e(t.purchaseOptionItems);let c=!1;if(s.children(t.purchaseOptionItem).each((function(){"individual"===e(this).attr("data-purchase-type")&&(c=!0)})),o.length)c&&o.find(".rg-purchase-overlay-option-manager-entity").find("option").filter("[value=individual]").attr("disabled",!0),o.toggle(),i.show();else{const a=r.attr("data-purchase-type"),n={entityType:a},i=wp.template("revgen-purchase-overlay-item-manager")(n);r.prepend(i),o=r.find(".rg-purchase-overlay-option-manager");const s=o.find(".rg-purchase-overlay-option-manager-entity");e(".rg-purchase-overlay-option-manager div").css({"border-bottom-color":"#e3e4e6"}),e(".rg-purchase-overlay-option-manager select").css({"border-color":"#e3e4e6"});const l=o.find(t.durationWrapper);if("individual"!==a)o.find(t.individualPricingWrapper).hide(),l.find(t.periodSelection).val(r.attr("data-expiry-duration")),l.find(t.periodCountSelection).val(r.attr("data-expiry-period")),l.show(),c&&s.find("option").filter("[value=individual]").attr("disabled",!0);else{l.hide();const e=r.attr("data-pricing-type"),a=o.find(t.individualPricingWrapper);"dynamic"===e?(a.find(t.individualPricingSelection).prop("checked",!0),a.find(".static-pricing").addClass("unchecked")):(a.find(t.individualPricingSelection).prop("checked",!1),a.find(".dynamic-pricing").addClass("unchecked"))}const p=o.find(t.purchaseRevenueWrapper);"subscription"===a?(o.find("div").css({height:" 55px"}),p.hide()):("ppu"===r.find(t.purchaseOptionItemPrice).attr("data-pay-model")?(p.find(t.purchaseRevenueSelection).prop("checked",!0),p.find(".pay-now").addClass("unchecked")):(p.find(t.purchaseRevenueSelection).prop("checked",!1),p.find(".pay-later").addClass("unchecked")),p.show())}e(".rev-gen__select2",o).each((function(){e(this).select2({width:"auto",dropdownAutoWidth:!0,dropdownParent:e(this).parent(),dropdownCssClass:":all:",minimumResultsForSearch:-1})}));const l=o.css("display"),p=r.find(".rg-purchase-overlay-purchase-options-item-actions");if(t.body.find(".rg-purchase-overlay-option-manager").hide(),t.body.find(".rg-purchase-overlay-purchase-options-item-actions").hide(),p.show(),"none"===l){const e=r.attr("data-custom-title"),t=r.attr("data-custom-desc");a(n,e,t)}o.css({display:l})})),t.body.on("option-manager-close",t.optionManager,(function(){const n=e(this);n.hide();const r=n.closest(t.purchaseOptionItem),o=r.attr("data-custom-title"),i=r.attr("data-custom-desc");a(n,o,i)})),t.body.on("click",t.optionRemove,(function(){const a=e(this).parents(".rg-purchase-overlay-purchase-options-item"),n=a.attr("data-purchase-type");let r;switch(n){case"individual":r=a.attr("data-paywall-id");break;case"timepass":r=a.attr("data-tlp-id");break;case"subscription":r=a.attr("data-sub-id")}"individual"!==n&&r?new i({id:"rg-modal-purchase-option-update",templateData:{optionType:n},onConfirm:async()=>{a.remove(),k(),O(n,r),t.isPublish=!0,t.savePaywall.trigger("click")}}):(a.remove(),k(),O(n,r),t.isPublish=!0,t.savePaywall.trigger("click"))})),t.body.on("change",t.purchaseOptionType,(function(){const a=e(this).parents(".rg-purchase-overlay-option-manager"),n=a.find(".rg-purchase-overlay-option-manager-entity"),r=a.find(t.individualPricingWrapper),o=a.find(t.purchaseRevenueWrapper),i=a.find(t.durationWrapper);"individual"===n.val()?(r.show(),i.hide()):(r.hide(),i.show()),"subscription"===n.val()?o.hide():o.show()})),t.body.on("change",t.individualPricingSelection,(function(){const a=e(this).parents(t.purchaseOptionItem),n=e(this).parents(".rg-purchase-overlay-option-manager"),r=n.find(t.individualPricingSelection),o=n.find(t.individualPricingWrapper);if(r.prop("checked")){const n=e(t.purchaseOptionItems),i=n.attr("data-dynamic-price"),s=n.attr("data-dynamic-revenue"),c=a.find(t.purchaseOptionItemPrice);c.attr("data-pay-model",s);const l=e(t.purchaseItemPriceIcon),p=G(i);l.css({display:"none"}),c.text(p),a.attr("data-pricing-type","dynamic"),a.find(t.purchaseItemPriceIcon).show(),r.val(1),o.find(".static-pricing").addClass("unchecked"),o.find(".dynamic-pricing").removeClass("unchecked")}else a.attr("data-pricing-type","static"),a.find(t.purchaseItemPriceIcon).hide(),r.val(0),o.find(".static-pricing").removeClass("unchecked"),o.find(".dynamic-pricing").addClass("unchecked")})),t.body.on("change",t.purchaseRevenueSelection,(function(){const a=e(this).parents(t.purchaseOptionItem),n=e(this).parents(".rg-purchase-overlay-option-manager"),r=n.find(t.purchaseRevenueSelection),s=a.find(t.purchaseOptionItemPrice),c=s.attr("data-pay-model"),l=r.val(),p=a.attr("data-purchase-type"),d=n.find(t.purchaseRevenueWrapper);let u;switch(p){case"individual":u=a.attr("data-paywall-id");break;case"timepass":u=a.attr("data-tlp-id");break;case"subscription":u=a.attr("data-sub-id")}if("individual"!==p&&u&&new i({id:"rg-modal-purchase-option-update",templateData:{optionType:p},onConfirm:async()=>{r.prop("checked")?(s.attr("data-pay-model","ppu"),r.val(1),x(a,!0),d.find(".pay-later").removeClass("unchecked"),d.find(".pay-now").addClass("unchecked")):(s.attr("data-pay-model","sis"),r.val(0),x(a,!1),d.find(".pay-later").addClass("unchecked"),d.find(".pay-now").removeClass("unchecked"))},onCancel:async()=>{s.attr("data-pay-model",c),r.val(l),r.attr("checked",1===parseInt(l)),x(a,1===parseInt(l)),1===parseInt(l)?(d.find(".pay-later").removeClass("unchecked"),d.find(".pay-now").addClass("unchecked")):(d.find(".pay-later").addClass("unchecked"),d.find(".pay-now").removeClass("unchecked"))}}),r.prop("checked")){s.attr("data-pay-model","ppu"),r.val(1);const n=Object(o.a)("You'll only be charged once you've reached $5.","revenue-generator");e(a).find(t.purchaseOptionItemDesc).text(n),x(a,!0),d.find(".pay-later").removeClass("unchecked"),d.find(".pay-now").addClass("unchecked")}else{s.attr("data-pay-model","sis"),r.val(0);const n=t.searchContent.val(),i=Object(o.b)(Object(o.a)("Get lifetime access to %1$s now!","revenue-generator"),n);e(a).find(t.purchaseOptionItemDesc).text(i),x(a,!1),d.find(".pay-later").addClass("unchecked"),d.find(".pay-now").removeClass("unchecked")}})),t.body.on("change",t.periodSelection,(function(){const a=e(this).parents(".rg-purchase-overlay-option-manager"),n=a.find(t.periodSelection),r=a.find(t.periodCountSelection);T(n.val(),r),e(this).parents(t.purchaseOptionItem).attr("data-expiry-duration",n.val())})),t.body.on("change",t.periodCountSelection,(function(){const a=e(this).parents(".rg-purchase-overlay-option-manager").find(t.periodCountSelection);e(this).parents(t.purchaseOptionItem).attr("data-expiry-period",a.val())})),t.body.on("focus",t.purchaseOptionItemPrice,(function(){const t=e(this).text().trim();e(this).attr("data-current-value",t)})).on("input change",t.purchaseOptionItemPrice,r((function(){const a=e(this).parents(t.purchaseOptionItem),n=a.find(t.purchaseOptionItemPrice),r=e(this).attr("data-current-value"),s=n.text().trim(),c=a.find(t.purchaseOptionPriceSymbol),l=a.attr("data-purchase-type"),p=n.attr("data-pay-model");let d;switch(c.text().trim().length||revenueGeneratorGlobalOptions.globalOptions.merchant_currency.length||S(),l){case"individual":d=a.attr("data-paywall-id");break;case"timepass":d=a.attr("data-tlp-id");break;case"subscription":d=a.attr("data-sub-id")}if("individual"!==l&&d)new i({id:"rg-modal-purchase-option-update",templateData:{optionType:l},onConfirm:async()=>{const t=G(s,"subscription"===l);e(this).empty().text(t),P(t,a)},onCancel:async()=>{const t=G(r,"subscription"===l);e(this).empty().text(t),P(t,a)}});else{const n=G(s,"subscription"===l);e(t.purchaseItemPriceIcon).css({display:"none"}),e(this).text(n),P(n,a)}p!==n.attr("data-pay-model")&&("ppu"===n.attr("data-pay-model")?t.snackBar.showSnackbar(Object(o.a)("Pay Now is only available for prices set to $1.99 or higher.","revenue-generator"),2500):t.snackBar.showSnackbar(Object(o.a)("Pay Later is only available for prices set less than $5.","revenue-generator"),2500)),k()}),1e3)),t.body.on("change",t.paywallAppliesTo,(function(){if("exclude_category"===e(this).val()||"category"===e(this).val()){t.searchPostWrapper.hide(),t.searchPaywallWrapper.show(),t.searchPaywallContent.length&&null===t.searchPaywallContent.val()&&(t.savePaywall.attr("disabled",!0),t.activatePaywall.attr("disabled",!0));const e=JSON.stringify(t.searchPaywallContent.val());t.postPreviewWrapper.attr("data-access-id",e)}else"specific_post"===e(this).val()?(t.searchPaywallWrapper.hide(),t.searchPostWrapper.show(),t.searchPost.length&&null===t.searchPost.val()&&(t.savePaywall.attr("disabled",!0),t.activatePaywall.attr("disabled",!0))):(t.savePaywall.removeAttr("disabled"),t.activatePaywall.removeAttr("disabled"),t.searchPaywallWrapper.hide(),t.searchPostWrapper.hide(),t.postPreviewWrapper.attr("data-access-id",t.postPreviewWrapper.attr("data-preview-id")))})),t.body.on("click",t.addOptionArea,(function(){const a=e(t.purchaseOptionItems).find(t.purchaseOptionItem).length;if(a<5){const a=wp.template("revgen-default-purchase-option-item");e(t.purchaseOptionItems).append(a)}5<=a+parseInt(1)&&e(t.optionArea).hide(),k()})),t.body.on("click",t.purchaseOptionInfoButton,(function(t){t.stopPropagation();const a=e(this).attr("data-info-for");e(".rev-gen-modal, .rev-gen-modal-overlay").remove(),new i({id:"rg-modal-info-"+a,closeOutside:!0});let n="";"revenue"===a?n="Pay Now v Pay Later":"pricing"===a&&(n="Static Pricing v Dynamic Pricing"),rgGlobal.sendLPGAEvent("Help","LP RevGen Configure Paywall",n,0,!0)})),t.purchaseOverlay.on("mouseenter",(function(){e(t.purchaseOptionItems).attr("data-paywall-id").length&&(t.purchaseOverlay.children(".rg-purchase-overlay-highlight").show(),e(t.purchaseOverlayRemove).show())})),t.purchaseOverlay.on("mouseleave",(function(){t.purchaseOverlay.children(".rg-purchase-overlay-highlight").hide(),e(t.purchaseOverlayRemove).hide()})),t.body.on("click",t.purchaseOverlayRemove,(function(){new i({id:"rg-modal-remove-paywall",onConfirm:async()=>{const a={action:"rg_remove_paywall",id:e(t.purchaseOptionItems).attr("data-paywall-id"),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(a){const n=t.paywallName.text().trim();t.snackBar.showSnackbar(a.msg,1500),t.purchaseOverlay.remove(),t.actionsWrapper.css({width:"75%","background-color":"rgba(239, 239, 239, 0.3)","backdrop-filter":"blur(10px)"});const r=wp.template("revgen-add-paywall");t.actionsWrapper.empty().append(r),a.preview_id&&e(t.addPaywall).attr("data-preview-id",a.preview_id),rgGlobal.sendLPGAEvent("Paywall Deleted","LP RevGen Configure Paywall",n,0,!0)}))}})})),t.body.on("click",t.addPaywall,(function(){const a=e(t.addPaywall).attr("data-preview-id");a&&m(a)})),t.body.on("click",t.gotoDashboard,(function(){const t=e(this).attr("data-dashboard-url");t&&(window.location.href=t)})),t.paywallName.on("keydown",(function(t){if(20<=e(this).text().trim().length)switch(t.keyCode){case 8:case 9:case 13:case 37:case 38:case 39:case 40:break;default:const e=new RegExp("^[a-zA-Z0-9.,/ $@()]+$"),a=t.key;if(e.test(a))return t.preventDefault(),!1}})),t.paywallName.on("focusout",(function(){if(t.paywallNameData!==e(this).text().trim()){const a="LP RevGen Configure Paywall",n="Edit Title",r=e(this).text().trim()+" - "+e(t.paywallTitle).text().trim();rgGlobal.sendLPGAEvent(n,a,r,0,!0),t.paywallNameData=e(this).text().trim()}})),t.body.on("change",t.entitySelection,(function(){const a=e(this).parents(t.purchaseOptionItem),n=a.attr("data-purchase-type"),r=e(this).val(),o=a.find(".rg-purchase-overlay-option-manager"),s=o.find("div"),c=e(a).find(t.editOption);let l;if(n!==r)if("subscription"===n?l=a.attr("data-sub-id"):"timepass"===n?l=a.attr("data-tlp-id"):"individual"===n&&(l=a.attr("data-paywall-id")),"individual"!==n&&l&&new i({id:"rg-modal-purchase-option-update",templateData:{optionType:n},onConfirm:async()=>{O(n,l,!1),t.isPublish=!0,t.savePaywall.trigger("click")},onCancel:async()=>(a.attr("data-purchase-type",n),e(this).val(n),!1)}),a.removeAttr("data-purchase-type"),a.removeAttr("data-expiry-duration"),a.removeAttr("data-expiry-period"),a.removeAttr("data-pricing-type"),a.removeAttr("data-paywall-id"),a.removeAttr("data-tlp-id"),a.removeAttr("data-sub-id"),a.removeAttr("data-uid"),a.removeAttr("data-order"),a.attr("data-order",""),a.attr("data-uid",""),a.attr("data-purchase-type",r),e(this).val(r),"individual"!==r){const e=a.find(t.purchaseOptionItemPrice);if(e.removeAttr("data-pay-model"),"timepass"===r){const n=revenueGeneratorGlobalOptions.defaultConfig.timepass;a.attr("data-tlp-id",""),a.attr("data-expiry-duration",n.duration),a.attr("data-expiry-period",n.period),e.attr("data-pay-model",n.revenue),e.text(n.price),a.find(t.purchaseOptionItemTitle).text(n.title),a.find(t.purchaseOptionItemDesc).text(n.description),s.removeClass("rg-purchase-overlay-option-manager-subscription"),o.find(t.periodCountSelection).val(n.period),o.find(t.periodSelection).val(n.duration)}else if("subscription"===r){const n=revenueGeneratorGlobalOptions.defaultConfig.subscription;a.attr("data-sub-id",""),a.attr("data-expiry-duration",n.duration),a.attr("data-expiry-period",n.period),e.attr("data-pay-model",n.revenue),e.text(n.price),a.find(t.purchaseOptionItemTitle).text(n.title),a.find(t.purchaseOptionItemDesc).text(n.description),s.addClass("rg-purchase-overlay-option-manager-subscription"),o.find(t.periodCountSelection).val(n.period),o.find(t.periodSelection).val(n.duration)}}else a.attr("data-pricing-type","static"),a.attr("data-paywall-id",""),s.removeClass("rg-purchase-overlay-option-manager-subscription");c.trigger("click")})),t.savePaywall.on("click",(function(){w(),k();const a=e(t.purchaseOptionItems);a.children(t.purchaseOptionItem).each((function(){e(this).attr("data-uid")||e(this).attr("data-uid",j())}));const n=a.find("[data-purchase-type='individual']");let r;n.length&&(r={title:n.find(t.purchaseOptionItemTitle).text().trim(),desc:n.find(t.purchaseOptionItemDesc).text().trim(),price:n.find(t.purchaseOptionItemPrice).text().trim(),revenue:n.find(t.purchaseOptionItemPrice).attr("data-pay-model"),type:n.attr("data-pricing-type"),order:n.attr("data-order"),custom_title:n.attr("data-custom-title"),custom_desc:n.attr("data-custom-desc")});const o=a.find("[data-purchase-type='timepass']"),i=[];o.each((function(){const a=e(this),n={title:a.find(t.purchaseOptionItemTitle).text().trim(),desc:a.find(t.purchaseOptionItemDesc).text().trim(),price:a.find(t.purchaseOptionItemPrice).text().trim(),revenue:e(a.find(t.purchaseOptionItemPrice)).attr("data-pay-model"),duration:e(a).attr("data-expiry-duration"),period:e(a).attr("data-expiry-period"),tlp_id:e(a).attr("data-tlp-id"),uid:e(a).attr("data-uid"),order:e(a).attr("data-order"),custom_title:e(a).attr("data-custom-title"),custom_desc:e(a).attr("data-custom-desc")};i.push(n)}));const s=a.find("[data-purchase-type='subscription']"),c=[];s.each((function(){const a=e(this),n={title:a.find(t.purchaseOptionItemTitle).text().trim(),desc:a.find(t.purchaseOptionItemDesc).text().trim(),price:a.find(t.purchaseOptionItemPrice).text().trim(),revenue:e(a.find(t.purchaseOptionItemPrice)).attr("data-pay-model"),duration:e(a).attr("data-expiry-duration"),period:e(a).attr("data-expiry-period"),sub_id:e(a).attr("data-sub-id"),uid:e(a).attr("data-uid"),order:e(a).attr("data-order"),custom_title:e(a).attr("data-custom-title"),custom_desc:e(a).attr("data-custom-desc")};c.push(n)}));const l=t.searchPost.val();let p="";l&&(p=JSON.stringify(l));const d={id:a.attr("data-paywall-id"),title:t.purchaseOverlay.find(t.paywallTitle).text().trim(),desc:t.purchaseOverlay.find(t.paywallDesc).text().trim(),name:t.paywallName.text().trim(),applies:e(t.paywallAppliesTo).val(),specific_posts:p,preview_id:t.postPreviewWrapper.attr("data-preview-id")},u={action:"rg_update_paywall",post_id:t.postPreviewWrapper.attr("data-access-id"),paywall:d,individual:r,time_passes:i,subscriptions:c,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};C(revenueGeneratorGlobalOptions.ajaxUrl,u)})),t.activatePaywall.on("click",(function(){if(0===parseInt(revenueGeneratorGlobalOptions.globalOptions.is_merchant_verified))l();else{let a;const n=e(t.purchaseOptionItem);let r=!1;e.each(n,(function(t,n){const o=e(n),i=o.attr("data-purchase-type");switch(i){case"individual":a=o.attr("data-paywall-id");break;case"timepass":a=o.attr("data-tlp-id");break;case"subscription":a=o.attr("data-sub-id")}r||a||"individual"===i||(r=!0)})),r?new i({id:"rg-modal-purchase-option-update",templateData:{optionType:"newPurchaseOption"},onConfirm:async()=>{t.isPublish=!0,t.savePaywall.trigger("click"),t.savePaywall.addClass("hide"),w(),setTimeout((function(){c(),_(),t.isPublish=!1}),1500)}}):(t.isPublish=!0,t.savePaywall.trigger("click"),t.savePaywall.addClass("hide"),w(),setTimeout((function(){c(),_(),t.isPublish=!1}),1500))}})),t.body.on("click",t.activateSignup,(function(){if(revenueGeneratorGlobalOptions.globalOptions.merchant_region.length){const e=revenueGeneratorGlobalOptions.globalOptions.merchant_region,t=revenueGeneratorGlobalOptions.signupURL;"US"===e?window.open(t.US,"_blank"):window.open(t.EU,"_blank")}})),t.body.on("click",t.warningSignup,(function(){if(revenueGeneratorGlobalOptions.globalOptions.merchant_region.length){const e=revenueGeneratorGlobalOptions.globalOptions.merchant_region,t=revenueGeneratorGlobalOptions.signupURL;"US"===e?window.open(t.US,"_blank"):window.open(t.EU,"_blank")}})),t.body.on("input change",t.accountActionId,(function(){n()&&e("body #rg_js_modal_confirm").removeAttr("disabled")})),t.body.on("input change",t.accountActionKey,(function(){n()&&e("body #rg_js_modal_confirm").removeAttr("disabled")})),t.body.on("input change",t.currencyRadio,(function(){t.currencyRadio&&e("#rg_js_modal_confirm",t.body).removeAttr("disabled")})),t.body.on("click",t.viewPost,(function(){const a=e(this).attr("data-target-id"),n=t.searchPaywallContent.val(),r=e(t.paywallAppliesTo).val(),o=t.searchPost.val();a&&s(a,n,r,o)})),t.body.on("click",t.viewDashboard,(function(){const t=e(this).attr("data-dashboard-url");t&&(window.location.href=t)})),function(){if(t.postContent){t.postContent.addClass("blur-content");const e=wp.template("revgen-purchase-overlay");t.purchaseOverlay.append(e),t.purchaseOverlay.show()}}()};e(".rev-gen-preview-main").length&&A()}()}))}(jQuery),function(e){e((function(){!function(){const t={body:e("body"),requestSent:!1,paywallContent:".rev-gen-dashboard-content",paywallPreview:".rev-gen-dashboard-content-paywall-preview",paywallContentWrapper:".rev-gen-dashboard-content-paywall",removePaywallDashboard:".rev-gen-dashboard-remove-paywall",newPaywall:e("#rg_js_newPaywall"),newContribution:e("#rg_js_newContribution"),sortPaywalls:e("#rg_js_filterPaywalls"),searchPaywall:e("#rg_js_searchPaywall"),editPayWallName:e(".rev-gen-dashboard-paywall-name"),paywallSearchIcon:e(".rev-gen-dashboard-bar--search-icon"),laterpayLoader:e(".laterpay-loader-wrapper"),contributionDelete:e(".rev-gen-dashboard__contribution-delete"),restartTour:e("#rg_js_RestartTutorial"),restartTourContribution:e("#rg_js_RestartTutorial_Contribution"),snackBar:e("#rg_js_SnackBar")},a=function(){t.laterpayLoader.css({display:"flex"})},n=function(a){if(!t.requestSent)if(t.requestSent=!0,a.length){const n={action:"rg_search_paywall",rg_current_url:window.location.href,search_term:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:n,dataType:"json"}).done((function(e){t.requestSent=!1,!0===e.success&&e.redirect_to&&(window.location.href=e.redirect_to)}))}else{const e=new URL(window.location.href),t=e.searchParams;t.delete("search_term"),e.search=t.toString();const a=e.toString();window.location.href=a}};t.body.on("click",t.paywallPreview,(function(){const a=e(this).closest(t.paywallContentWrapper).attr("data-paywall-id");a&&(window.location.href=revenueGeneratorGlobalOptions.paywallPageBase+"&current_paywall="+a)})),t.restartTour.on("click",(function(){const a={action:"rg_restart_tour",tour_type:"paywall_tutorial_done",restart_tour:"1",security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(e){!0===e.success&&(window.location=t.newPaywall.attr("href"))}))})),t.restartTourContribution.on("click",(function(){const a={action:"rg_restart_tour",tour_type:"is_contribution_tutorial_completed",restart_tour:"1",security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(e){!0===e.success&&(window.location=t.newContribution.attr("href"))}))})),t.sortPaywalls.on("change",(function(){const t=e(this).val(),a={action:"rg_set_paywall_order",rg_current_url:window.location.href,rg_sort_order:t,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(e){!0===e.success&&e.redirect_to&&(window.location.href=e.redirect_to)}))})),t.searchPaywall.on("focus",(function(){e(t.paywallContent).addClass("blury"),t.body.css({height:"100%"}),e(this).val().trim().length&&t.searchPaywall.trigger("change")})),t.searchPaywall.on("focusout",(function(){t.body.css({height:"auto"}),e(t.paywallContent).removeClass("blury")})),e(t.paywallContent).on("click",(function(){t.body.css({overflow:"auto",height:"auto"}),e(t.paywallContent).removeClass("blury")})),t.paywallSearchIcon.on("click",(function(){a();const e=t.searchPaywall.val().trim();n(e)})),t.searchPaywall.on("keyup",(function(e){13===e.keyCode&&t.paywallSearchIcon.trigger("click")})),t.editPayWallName.on("focusout",(function(){if(!t.requestSent){t.requestSent=!0,e(t.paywallContent).addClass("blury"),t.body.css({overflow:"hidden",height:"100%"});const a={action:"rg_set_paywall_name",new_paywall_name:e(this).text().trim(),paywall_id:e(this).closest(t.paywallContentWrapper).attr("data-paywall-id"),security:revenueGeneratorGlobalOptions.rg_paywall_nonce};e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(a){t.snackBar.showSnackbar(a.msg,1500),t.body.css({overflow:"auto",height:"auto"}),e(t.paywallContent).removeClass("blury"),t.requestSent=!1}))}})),t.editPayWallName.on("keydown",(function(t){if(20<=e(this).text().trim().length)switch(t.keyCode){case 8:case 9:case 13:case 37:case 38:case 39:case 40:break;default:const e=new RegExp("^[a-zA-Z0-9.,/ $@()]+$"),a=t.key;if(e.test(a))return t.preventDefault(),!1}})),t.contributionDelete.on("click",(function(a){a.preventDefault();const n=e(a.target),r=n.data("id"),o=n.data("nonce");new i({id:"rg-modal-remove-contribution",templateData:{isEditable:parseInt(n.data("editable"),10)},onConfirm:async()=>{e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,data:{action:"rg_contribution_delete",security:o,id:r},success:e=>{t.snackBar.showSnackbar(e.data.msg,1500),setTimeout(()=>{window.location.reload()},1500)}})},onCancel:()=>{}})})),t.body.on("click",t.removePaywallDashboard,(function(){const a=e(this).attr("data-paywall-id"),n=e(this).closest(".rev-gen-dashboard-content-paywall-info").find(".rev-gen-dashboard-paywall-name").text().trim();new i({id:"rg-modal-remove-paywall",onConfirm:async()=>{e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",data:{action:"rg_remove_paywall",id:a,security:revenueGeneratorGlobalOptions.rg_paywall_nonce},success:e=>{t.snackBar.showSnackbar(e.msg,1500),rgGlobal.sendLPGAEvent("Paywall Deleted","LP RevGen Configure Paywall",n,0,!0),setTimeout((function(){window.location.reload()}),1500)}})},onCancel:()=>{}})}))}()}))}(jQuery);var s=a(6);var c=a(5),l=a(1);const p=revenueGeneratorGlobalOptions;window.RevGenApp={vars:{},views:{}},window.handlePreviewUpdate=(e,t)=>{window.RevGenApp.views.app.trigger("preview-update",{attr:e,value:t})},window.handleIframeLoad=e=>{e.classList.remove("loading")},window.trackTourStep=e=>{rgGlobal.sendLPGAEvent(e.event,e.category,e.action,0,!0)},((e,t)=>{e((function(){const a={loader:e(".laterpay-loader-wrapper")},n=t.View.extend({el:"#rg-contribution-builder-app",events:{"keyup [data-bind]":"onInputChange","change [data-bind]":"onInputChange","change [data-bind=layout_type]":"onLayoutTypeChange","focusout [data-validate]":"onValidatedFieldFocusOut","submit form":"onFormSubmit","click #rg_js_toggle_preview":"onPreviewToggleClick"},initialize(){this.doing_ajax=!1,this.originalData=this.model.toJSON(),this.$o={form:e("#rg_js_form",this.$el),snackBar:e("#rg_js_SnackBar",this.$el),submitButton:e("input[type=submit]",this.$el),helperMessage:e(".rg-contribution-builder__helper-message",this.$el),previewIframe:e("#rg-contribution-builder-preview",this.$el)};const t=this;window.addEventListener("tour-start",(function(){t.initializeTour()})),this.listenTo(this,"preview-update",this.onPreviewUpdate),this.listenTo(this.model,"change",this.onModelChange)},initializeTour(){this.tour=new c.a({steps:l.a.contribution.steps.builder,trackCallback:window.trackTourStep})},onPreviewUpdate(e){if(!e||!e.attr||!e.value)return;const t=this.validateValue(e.attr,e.value);this.model.set(e.attr,t)},validateValue(e,t){let a=t;switch(e){case"amounts":a=[];for(let e=0;e<t.length;e++)"custom"!==t?a.push(parseFloat(t[e])):a.push(t)}return a},onInputChange(t){const a=e(t.target),n=a.attr("data-bind");let r=a.val();r=this.validateValue(n,r),this.model.set(n,r)},onModelChange(e){JSON.stringify(e.toJSON())!==JSON.stringify(this.originalData)?this.enableSubmit():this.disableSubmit()},onLayoutTypeChange(t){const a=e(t.target).val();this.$o.previewIframe.addClass("loading");let n=this.$o.previewIframe.attr("src");n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(!t||!Object.keys(t).length)return e;var a=e,n=e.indexOf("?");return-1!==n&&(t=Object.assign(Object(s.parse)(e.substr(n+1)),t),a=a.substr(0,n)),a+"?"+Object(s.stringify)(t)}(n,{layout_type:a}),this.$o.previewIframe.attr("src",n)},enableSubmit(){this.$o.submitButton.removeAttr("disabled")},disableSubmit(){this.$o.submitButton.attr({disabled:"disabled"})},onValidatedFieldFocusOut(t){const a=e(t.target);this.validateInput(a)?a.removeClass("error"):a.addClass("error")},validateInput(e){if(!e)return;let t=!0;const a=e.attr("data-validation"),n=e.attr("required"),r=e.val();switch(a){case"url":r&&(t=function(e){try{return new URL(e),!0}catch(e){return!1}}(r));break;default:t=r}return n&&!r&&(t=!1),t},isFormValid(){const t=this;return e("[data-bind]",this.$el).each((function(a,n){const r=e(n);t.validateInput(r)?r.removeClass("error"):r.addClass("error")})),!e("[data-bind].error",this.$el).length},getJSONData(){let e={};const t=this.$o.form.serializeArray(),a=this.model.toJSON();return _(t).each((function(t){e[t.name]=t.value})),e={...e,...a},e},onFormSubmit(t){if(t.preventDefault(),!this.isFormValid())return!1;if(0===parseInt(p.globalOptions.is_merchant_verified))return u(),!1;if(!this.doing_ajax){const t=this;this.doing_ajax=!0,f();const a=this.getJSONData();e.ajax({url:p.ajaxUrl,method:"POST",data:a,dataType:"json"}).done((function(e){if(t.$o.snackBar.showSnackbar(e.msg,1500),e.success){d(e.code),t.$o.submitButton.text(e.button_text),t.disableSubmit(),t.$o.helperMessage.show();const n="New ShortCode\t",r="LP RevGen Contributions",i=o(),s=t.model.get("amounts");let c=i+" - "+a.name;_(s).each((function(e){const t=e.price;c+=" - "+t})),rgGlobal.sendLPGAEvent(n,r,c,0,!0),window.location.href!==e.edit_link&&setTimeout((function(){window.location.href=e.edit_link}),1500)}t.doing_ajax=!1,y()}))}},onPreviewToggleClick(t){const a=e(t.target);this.$el.hasClass("preview-focus")?(this.$el.removeClass("preview-focus"),a.removeClass("mode-collapse"),a.text(a.data("expand-text"))):(this.$el.addClass("preview-focus"),a.addClass("mode-collapse"),a.text(a.data("collapse-text")))}}),r=t.View.extend({el:"#rg-contribution-builder-preview",events:{},initialize(){}}),o=function(){let e=p.merchant_id;return e||(e=window.RevGenApp.vars.merchant_id),e},d=function(t){const a=e("<input>");e("body").append(a),a.val(t).select(),document.execCommand("copy"),a.remove()},u=function(){new i({id:"rg-modal-account-activation",keepOpen:!0,templateData:{},onConfirm:()=>{h()},onCancel:(e,t)=>{if(revenueGeneratorGlobalOptions.globalOptions.merchant_region.length){const e=revenueGeneratorGlobalOptions.globalOptions.merchant_region,a=revenueGeneratorGlobalOptions.signupURL;"US"===e?window.open(a.US,"_blank"):window.open(a.EU,"_blank");const n=new Event("rev-gen-modal-close");t.dispatchEvent(n),h()}rgGlobal.sendLPGAEvent("Connect Account","LP RevGen Account","Signup",0,!0)}})},h=function(){new i({id:"rg-modal-connect-account",keepOpen:!0,templateData:{},onConfirm:async(t,a)=>{const n=new Event("rev-gen-modal-close"),r=e(a),o=e("#rev-gen-merchant-id",r).val(),i=e("#rev-gen-api-key",r).val(),s=e("#rg_js_restartVerification",r);r.addClass("loading");const c=g(o,i);s.on("click",(function(){a.dispatchEvent(n),h()})),c?(r.removeClass("loading"),window.RevGenApp.vars.merchant_id=o,a.dispatchEvent(n)):r.removeClass("loading").addClass("modal-error")}})},g=function(t,n){if(!a.requestSent){a.requestSent=!0;const r={action:"rg_verify_account_credentials",merchant_id:t,merchant_key:n,security:revenueGeneratorGlobalOptions.rg_paywall_nonce};let o="",i=!1;return e.ajax({url:revenueGeneratorGlobalOptions.ajaxUrl,method:"POST",async:!1,data:r,dataType:"json"}).done((function(e){a.requestSent=!1,revenueGeneratorGlobalOptions.merchant_id=e.merchant_id,!0===e.success?(a.isPublish=!0,f(),setTimeout((function(){revenueGeneratorGlobalOptions.globalOptions.is_merchant_verified="1",y(),a.snackBar.showSnackbar(e.msg,1500)}),2e3),o="Success",i=!0):(a.isPublish=!0,o="Failure - "+e.msg,i=!1);rgGlobal.sendLPGAEvent("Connect Account","LP RevGen Account",o,0,!0)})),i}};!function(){if(!e("#rg-contribution-builder-app").length)return;const a=RevGenContributionData,o=new t.Model(a);window.RevGenApp.views.app=new n({model:o}),window.RevGenApp.views.preview=new r({model:o})}();const f=function(){a.loader.css({display:"flex"})},y=function(){a.loader.hide()}}))})(jQuery,Backbone)}]);